{"version":3,"file":"static/js/534.052edff5.chunk.js","mappings":"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","sources":["common/utils/smallFn/convertDate.js","common/utils/smallFn/getTeacherAvaliableTimes.js","common/utils/smallFn/selectTeacherDataFromGeneralCalendar.js","common/utils/smallFn/fetchSchoolData.js","pages/chooseTeacher/teachers.jsx"],"sourcesContent":["import { format } from 'date-fns';\r\nimport { toZonedTime  } from 'date-fns-tz';\r\nimport { uk } from 'date-fns/locale';\r\n\r\nfunction translateUkrainianMonthToEnglish(month) {\r\n    const months = {\r\n        \"січня\": \"January\",\r\n        \"лютого\": \"February\",\r\n        \"березня\": \"March\",\r\n        \"квітня\": \"April\",\r\n        \"травня\": \"May\",\r\n        \"червня\": \"June\",\r\n        \"липня\": \"July\",\r\n        \"серпня\": \"August\",\r\n        \"вересня\": \"September\",\r\n        \"жовтня\": \"October\",\r\n        \"листопада\": \"November\",\r\n        \"грудня\": \"December\"\r\n    };\r\n\r\n    return months[month];\r\n}\r\n\r\nfunction parseUkrainianDate(dateStr) {\r\n    const cleanedDateStr = dateStr.replace('р.', '').replace('о', '').trim();\r\n    \r\n    const [day, monthUkr, year, time, time2, time3] = cleanedDateStr.split(' ');\r\n   \r\n    const monthEng = translateUkrainianMonthToEnglish(monthUkr);\r\n\r\n    const formattedDateStr = `${monthEng} ${day}, ${year} ${time3}.000+00:00`;\r\n\r\n    return new Date(formattedDateStr).toUTCString();\r\n}\r\n\r\n\r\n\r\nconst formatDateToUkrainian = (dateStr) => {\r\n    const date = new Date(dateStr);\r\n    const day = date.getUTCDate();\r\n    const monthNames = ['січня', 'лютого', 'березня', 'квітня', 'травня', 'червня', 'липня', 'серпня', 'вересня', 'жовтня', 'листопада', 'грудня'];\r\n    const month = monthNames[date.getUTCMonth()];\r\n    const year = date.getUTCFullYear();\r\n    const hours = String(date.getUTCHours()).padStart(2, '0');\r\n    const minutes = String(date.getUTCMinutes()).padStart(2, '0');\r\n  \r\n    return `${day} ${month} ${year} р. о ${hours}:${minutes}`;\r\n  };\r\n\r\nexport {parseUkrainianDate, formatDateToUkrainian};","const getTeacherAvailableTimes = (teacher, selectedTimes, lang_from_general_cal, level, parseUkrainianDate, lessonTypes) => {\r\n  // Попытка загрузить данные из localStorage\r\n  const savedAvailableTimes = localStorage.getItem(`availableTimes_${teacher.data.teacherId}`);\r\n  if (savedAvailableTimes) {\r\n    try {\r\n      const parsedAvailableTimes = JSON.parse(savedAvailableTimes);\r\n      return parsedAvailableTimes.map(timeSlot => timeSlot.time);\r\n    } catch (e) {\r\n      console.error('Invalid JSON string for availableTimes', e);\r\n    }\r\n  }\r\n\r\n  // Если в localStorage данных нет, выполняем стандартный расчет\r\n  let parsedSelectedTimes = [];\r\n  if (typeof selectedTimes === 'string') {\r\n    try {\r\n      parsedSelectedTimes = JSON.parse(selectedTimes);\r\n      // Дополнительная проверка, чтобы убедиться, что parsedSelectedTimes является массивом\r\n      if (!Array.isArray(parsedSelectedTimes)) {\r\n        console.error('parsedSelectedTimes is not an array:', parsedSelectedTimes);\r\n        parsedSelectedTimes = []; // Обнуляем, чтобы избежать ошибок в дальнейшем\r\n      }\r\n    } catch (e) {\r\n      console.error('Invalid JSON string for selectedTimes', e);\r\n    }\r\n  } else if (Array.isArray(selectedTimes)) {\r\n    parsedSelectedTimes = selectedTimes; // Если selectedTimes уже массив\r\n  }\r\n  // .filter(lv => lv.lessonTypes == lessonTypes)\r\n  const availableTimes = teacher.data.lang\r\n    .filter(langObj => langObj.lang === lang_from_general_cal)\r\n    .flatMap(langObj => langObj.level)\r\n    .filter(lv => lv.levelName === level)\r\n    .flatMap(lv =>lv.lessonTypes.filter(lv => lv.typeName == lessonTypes))\r\n    .flatMap(lv => lv.date)\r\n    .flatMap(dateObj => dateObj.workTime)\r\n    .filter(workTimeSlot =>\r\n      parsedSelectedTimes.some(selectedDate =>\r\n        new Date(workTimeSlot.time).getTime() === new Date(parseUkrainianDate(selectedDate)).getTime() && workTimeSlot.slots > 0\r\n      )\r\n    );\r\n  console.log(availableTimes)\r\n  localStorage.setItem(`availableTimes_${teacher.data.teacherId}`, JSON.stringify(availableTimes));\r\n\r\n  return availableTimes.map(timeSlot => timeSlot.time);\r\n};\r\n\r\nexport default getTeacherAvailableTimes;\r\n","const selectTeacherAndDates = (teacher, lang, level, lessonTypes, time, setSelectTimes, selectTimes) => {\r\n    const selected = `${teacher.data.teacherName}, ${teacher.data.teacherId}, ${lang}, ${level}, ${lessonTypes}, ${time}`;\r\n    const isSelected = selectTimes.includes(selected);\r\n\r\n    if (isSelected) {\r\n        // Удаляем время, если оно уже выбрано\r\n        const updatedTimes = selectTimes.filter(item => item !== selected);\r\n        setSelectTimes(updatedTimes);\r\n        localStorage.setItem('selectedSlots', JSON.stringify(updatedTimes));\r\n    } else {\r\n\r\n        const updatedTimes = [...selectTimes, selected];\r\n        setSelectTimes(updatedTimes);\r\n        localStorage.setItem('selectedSlots', JSON.stringify(updatedTimes));\r\n    }\r\n};\r\nexport default selectTeacherAndDates","import axios from \"axios\";\r\nimport { parseUkrainianDate } from \"./convertDate\";\r\n\r\nconst fetchSchoolData = async (schoolId, level, selectedTimes, language, lang_from_general_cal, lessonTypes, setLang, setAllTeachers, setSchoolData, setError, setLoading) => {\r\n    try {\r\n      const response = await axios.get(`http://13.60.221.226/api/schools/${schoolId}`);\r\n      let teachers = response.data[0].ESL.teacher;\r\n\r\n      if (level) {\r\n        let parsedSelectedTimes = [];\r\n        if (typeof selectedTimes === 'string' && selectedTimes.length > 0) {\r\n          try {\r\n            // Parse selectedTimes from localStorage\r\n            parsedSelectedTimes = JSON.parse(selectedTimes);\r\n          } catch (e) {\r\n            console.error('Invalid JSON string for selectedTimes:', e);\r\n          }\r\n        }\r\n        // Ensure parsedSelectedTimes is always an array\r\n        if (!Array.isArray(parsedSelectedTimes)) {\r\n          parsedSelectedTimes = [];\r\n        }\r\n        teachers = teachers.filter(teacher =>\r\n          teacher.data &&\r\n          teacher.data.lang.some(langObj =>\r\n            langObj.level &&\r\n            langObj.level.some(l =>\r\n              l.levelName === level &&\r\n              (langObj.lang === language || langObj.lang === lang_from_general_cal) &&\r\n              l.lessonTypes.some(lessonTypeObj =>\r\n                lessonTypeObj.typeName === lessonTypes &&\r\n                (parsedSelectedTimes.length === 0 ||\r\n                  parsedSelectedTimes.some(selectedDate =>\r\n                    lessonTypeObj.date.some(dateObj =>\r\n                      dateObj.workTime.some(workTimeSlot =>\r\n                        new Date(workTimeSlot.time).getTime() === new Date(parseUkrainianDate(selectedDate)).getTime() && workTimeSlot.slots > 0\r\n                      )\r\n                    )\r\n                  )\r\n                )\r\n              )\r\n            )\r\n          )\r\n        );\r\n      }\r\n      console.log(teachers)\r\n      const languages = teachers.flatMap(teacher =>\r\n        teacher.data.lang.flatMap(langObj =>\r\n          langObj.lang\r\n        )\r\n      );\r\n\r\n      const allTeacherDates = teachers.flatMap(teacher =>\r\n        teacher.data.lang\r\n          .filter(langObj => langObj.lang === language)\r\n          .flatMap(langObj =>\r\n            langObj.level\r\n              .filter(lv => lv.levelName === level)\r\n              .flatMap(lv => lv.lessonTypes.filter(lv => lv.typeName == lessonTypes)\r\n                .flatMap(lv => lv.date)\r\n              )\r\n\r\n          )\r\n      );\r\n\r\n      if (language) {\r\n        setLang(languages);\r\n      } else if (lang_from_general_cal) {\r\n        setLang(lang_from_general_cal);\r\n      }\r\n\r\n      setAllTeachers(allTeacherDates);\r\n      setSchoolData(teachers);\r\n    } catch (error) {\r\n      setError(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  export default fetchSchoolData","import { useLocation } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LogoImg from '../../services/images/Group12.svg'\r\nimport { parseUkrainianDate, formatDateToUkrainian } from '../../common/utils/smallFn/convertDate'\r\nimport getTeacherAvailableTimes from \"../../common/utils/smallFn/getTeacherAvaliableTimes\";\r\nimport selectTeacherAndDates from \"../../common/utils/smallFn/selectTeacherDataFromGeneralCalendar\";\r\nimport Teacher1Img from '../../services/images/teach1.jpg'\r\nimport Teacher2Img from '../../services/images/teach2.jpg'\r\nimport Footer from \"../../common/components/Footer/Footer\";\r\nimport fetchSchoolData from \"../../common/utils/smallFn/fetchSchoolData\";\r\n\r\nimport '../chooseLanguage/language.css';\r\nimport './teachers.css'\r\n\r\nconst Teachers = () => {\r\n  const [schoolData, setSchoolData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [allTeachers, setAllTeachers] = useState([]);\r\n  const [lang, setLang] = useState();\r\n  const [selectTimes, setSelectTimes] = useState([])\r\n  const [counts, setCount] = useState(1)\r\n\r\n  const location = useLocation();\r\n  const { level } = location.state || {};\r\n  const { language } = location.state || {};\r\n  const { lessonTypes } = location.state || {};\r\n  const { lang_from_general_cal } = location.state || {};\r\n  const { schoolId } = location.state || {};\r\n  const { count } = location.state || {};\r\n\r\n  console.log(lang_from_general_cal, level, lessonTypes, schoolId, count)\r\n\r\n  const selectedTimes = localStorage.getItem('selectedDates');\r\n  console.log(schoolId)\r\n  const HandleFinish = () => {\r\n    if (language) {\r\n      return '/date';\r\n    } else {\r\n      return '/final';\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const keys = Object.keys(localStorage);\r\n    localStorage.setItem('OrderId', [])\r\n    // keys.forEach(key => {\r\n    //   if (key.startsWith('availableTimes_')) {\r\n    //     localStorage.removeItem(key);\r\n    //   }\r\n    // });\r\n    fetchSchoolData(schoolId, level, selectedTimes, language, lang_from_general_cal, lessonTypes, setLang, setAllTeachers, setSchoolData, setError, setLoading);\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">Error: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"main\">\r\n        <div className=\"container\">\r\n          <div className='logo'>\r\n            <div className='logo-items'>\r\n              <Link to={`/${schoolId}`}><img src={LogoImg} alt=\"Logo\" /></Link>\r\n            </div>\r\n          </div>\r\n          <div className=\"container-items-block\">\r\n            <h1 className=\"teacher-title\">Оберіть вчителя</h1>\r\n\r\n            {schoolData && (\r\n              <>\r\n                {/* {language &&\r\n                  <div className=\"selectDateAndCount\">\r\n                    <Link to={'/date'} state={{ allTeachers: allTeachers, level: level, lang: lang, lessonTypes: lessonTypes, schoolId: schoolId, count: count ? count : counts }} className=\"select-date-link\">\r\n                      <button>Обрати час</button>\r\n                    </Link>\r\n\r\n\r\n                  </div>\r\n                } */}\r\n                <div className=\"teachers-data\">\r\n                  {schoolData.map((teacher, index) => (\r\n                    <div className=\"teacher\" key={index}>\r\n                      <div className=\"teacherData\">\r\n                        <div className=\"teacherImg\">\r\n                          <img src={Teacher1Img} alt=\"\" />\r\n                        </div>\r\n                        <div className=\"name-and-btn\">\r\n                          <div className=\"teacher-link\">\r\n                            <Link to={'/teacherPage'} state={{ teacher }}><p>{teacher.data.teacherName}</p></Link>\r\n                          </div>\r\n                          {getTeacherAvailableTimes(teacher, selectedTimes, lang_from_general_cal, level, parseUkrainianDate, lessonTypes).length <= 0 ?\r\n                            <Link to={HandleFinish()} state={{\r\n                              teacherDate: teacher.data.lang.filter(lang => lang.lang === language),\r\n                              level: level,\r\n                              lang_from_general_cal: lang,\r\n                              teacherId: teacher.data.teacherId,\r\n                              teacherName: teacher.data.teacherName,\r\n                              lessonTypes: lessonTypes,\r\n                              schoolId: schoolId,\r\n                              count: count ? count : counts\r\n                            }} className=\"select-btn\">\r\n                              <div><p>Обрати</p></div>\r\n                            </Link> : <div className=\"select-btn\">\r\n                              <div className=\"teacher-times\">\r\n                                {getTeacherAvailableTimes(teacher, selectedTimes, lang_from_general_cal, level, parseUkrainianDate).length > 0 ? (\r\n                                  <>\r\n                                    <ul className=\"teachers-times\">\r\n                                      {getTeacherAvailableTimes(teacher, selectedTimes, lang_from_general_cal, level, parseUkrainianDate).map((time, idx) => (\r\n                                        <li\r\n                                          key={idx}\r\n                                          onClick={() => selectTeacherAndDates(\r\n                                            teacher,\r\n                                            lang,\r\n                                            level,\r\n                                            lessonTypes,\r\n                                            time,\r\n                                            setSelectTimes,\r\n                                            selectTimes\r\n                                          )}\r\n                                          style={{\r\n                                            cursor: 'pointer',\r\n                                            backgroundColor: selectTimes.includes(`${teacher.data.teacherName}, ${teacher.data.teacherId}, ${lang}, ${level}, ${lessonTypes}, ${time}`) ? '#205C48' : '#D9D9D9',\r\n                                            color: selectTimes.includes(`${teacher.data.teacherName}, ${teacher.data.teacherId}, ${lang}, ${level}, ${lessonTypes}, ${time}`) ? 'white' : '#205C48'\r\n                                          }}\r\n                                        >\r\n                                          {formatDateToUkrainian(time)}\r\n                                        </li>\r\n                                      ))}\r\n                                    </ul>\r\n                                  </>\r\n                                ) : null}\r\n                              </div>\r\n                            </div>\r\n                          }\r\n\r\n                        </div>\r\n                      </div>\r\n                      <hr />\r\n\r\n                    </div>\r\n                  ))}\r\n\r\n                </div>\r\n                {schoolData.some(teacher =>\r\n                  getTeacherAvailableTimes(teacher, selectedTimes, lang_from_general_cal, level, parseUkrainianDate).length > 0\r\n                ) && (\r\n                    <Link to={HandleFinish()} state={{\r\n                      teacherDate: schoolData[0].data.lang.filter(lang => lang.lang === language),\r\n                      level: level,\r\n                      lang_from_general_cal: lang,\r\n                      teacherId: schoolData[0].data.teacherId,\r\n                      lessonTypes: lessonTypes,\r\n                      schoolId: schoolId,\r\n                      count: count ? count : counts\r\n                    }} className=\"select-btn\">\r\n                      <p>Далі</p>\r\n                    </Link>\r\n                  )}\r\n              </>)}\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div >\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Teachers;\r\n"],"names":["parseUkrainianDate","dateStr","cleanedDateStr","replace","trim","day","monthUkr","year","time","time2","time3","split","monthEng","Date","toUTCString","formatDateToUkrainian","date","getUTCDate","getUTCMonth","getUTCFullYear","String","getUTCHours","padStart","getUTCMinutes","getTeacherAvailableTimes","teacher","selectedTimes","lang_from_general_cal","level","lessonTypes","savedAvailableTimes","localStorage","getItem","data","teacherId","JSON","parse","map","timeSlot","e","console","error","parsedSelectedTimes","Array","isArray","availableTimes","lang","filter","langObj","flatMap","lv","levelName","typeName","dateObj","workTime","workTimeSlot","some","selectedDate","getTime","slots","log","setItem","stringify","selectTeacherAndDates","setSelectTimes","selectTimes","selected","teacherName","includes","updatedTimes","item","async","schoolId","language","setLang","setAllTeachers","setSchoolData","setError","setLoading","teachers","axios","get","ESL","length","l","lessonTypeObj","languages","allTeacherDates","message","Teachers","schoolData","useState","loading","allTeachers","counts","setCount","location","useLocation","state","count","HandleFinish","useEffect","Object","keys","fetchSchoolData","_jsx","className","children","_jsxs","_Fragment","Link","to","src","LogoImg","alt","index","Teacher1Img","teacherDate","idx","onClick","style","cursor","backgroundColor","color","Footer"],"sourceRoot":""}