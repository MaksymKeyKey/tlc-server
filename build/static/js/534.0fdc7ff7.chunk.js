"use strict";(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[534],{5501:(e,a,t)=>{t.d(a,{r:()=>l,u:()=>s});t(2573);function s(e){const a=e.replace("\u0440.","").replace("\u043e","").trim(),[t,s,l,r,c,n]=a.split(" "),i={"\u0441\u0456\u0447\u043d\u044f":"January","\u043b\u044e\u0442\u043e\u0433\u043e":"February","\u0431\u0435\u0440\u0435\u0437\u043d\u044f":"March","\u043a\u0432\u0456\u0442\u043d\u044f":"April","\u0442\u0440\u0430\u0432\u043d\u044f":"May","\u0447\u0435\u0440\u0432\u043d\u044f":"June","\u043b\u0438\u043f\u043d\u044f":"July","\u0441\u0435\u0440\u043f\u043d\u044f":"August","\u0432\u0435\u0440\u0435\u0441\u043d\u044f":"September","\u0436\u043e\u0432\u0442\u043d\u044f":"October","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430":"November","\u0433\u0440\u0443\u0434\u043d\u044f":"December"}[s];return new Date(`${i} ${t}, ${l} ${n}.000+00:00`).toUTCString()}const l=e=>{const a=new Date(e);return`${a.getUTCDate()} ${["\u0441\u0456\u0447\u043d\u044f","\u043b\u044e\u0442\u043e\u0433\u043e","\u0431\u0435\u0440\u0435\u0437\u043d\u044f","\u043a\u0432\u0456\u0442\u043d\u044f","\u0442\u0440\u0430\u0432\u043d\u044f","\u0447\u0435\u0440\u0432\u043d\u044f","\u043b\u0438\u043f\u043d\u044f","\u0441\u0435\u0440\u043f\u043d\u044f","\u0432\u0435\u0440\u0435\u0441\u043d\u044f","\u0436\u043e\u0432\u0442\u043d\u044f","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043d\u044f"][a.getUTCMonth()]} ${a.getUTCFullYear()} \u0440. \u043e ${String(a.getUTCHours()).padStart(2,"0")}:${String(a.getUTCMinutes()).padStart(2,"0")}`}},2635:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var s=t(3216),l=t(5043),r=t(5475),c=t(8571),n=t(5501);const i=(e,a,t,s,l,r)=>{const c=localStorage.getItem("availableTimes_"+e.data.teacherId);if(c)try{return JSON.parse(c).map((e=>e.time))}catch(o){console.error("Invalid JSON string for availableTimes",o)}let n=[];if("string"===typeof a)try{n=JSON.parse(a),Array.isArray(n)||(console.error("parsedSelectedTimes is not an array:",n),n=[])}catch(o){console.error("Invalid JSON string for selectedTimes",o)}else Array.isArray(a)&&(n=a);const i=e.data.lang.filter((e=>e.lang===t)).flatMap((e=>e.level)).filter((e=>e.levelName===s)).flatMap((e=>e.lessonTypes.filter((e=>e.typeName==r)))).flatMap((e=>e.date)).flatMap((e=>e.workTime)).filter((e=>n.some((a=>new Date(e.time).getTime()===new Date(l(a)).getTime()&&e.slots>0))));return localStorage.setItem("availableTimes_"+e.data.teacherId,JSON.stringify(i)),i.map((e=>e.time))},o=(e,a,t,s,l,r,c)=>{const n=`${e.data.teacherName}, ${e.data.teacherId}, ${a}, ${t}, ${s}, ${l}`;if(c.includes(n)){const e=c.filter((e=>e!==n));r(e),localStorage.setItem("selectedSlots",JSON.stringify(e))}else{const e=[...c,n];r(e),localStorage.setItem("selectedSlots",JSON.stringify(e))}},d=t.p+"static/media/teach1.6bd57cbb5eaa856df04f.jpg";t.p;var m=t(8929),h=t(6213);const g=async(e,a,t,s,l,r,c,i,o,d,m)=>{try{let d=(await h.A.get(`http://13.60.221.226/api/schools/${e}`)).data[0].ESL.teacher;if(a){let e=[];if("string"===typeof t&&t.length>0)try{e=JSON.parse(t)}catch(g){console.error("Invalid JSON string for selectedTimes:",g)}Array.isArray(e)||(e=[]),d=d.filter((t=>t.data&&t.data.lang.some((t=>t.level&&t.level.some((c=>c.levelName===a&&(t.lang===s||t.lang===l)&&c.lessonTypes.some((a=>a.typeName===r&&(0===e.length||e.some((e=>a.date.some((a=>a.workTime.some((a=>new Date(a.time).getTime()===new Date((0,n.u)(e)).getTime()&&a.slots>0)))))))))))))))}console.log(d);const m=d.flatMap((e=>e.data.lang.flatMap((e=>e.lang)))),T=d.flatMap((e=>e.data.lang.filter((e=>e.lang===s)).flatMap((e=>e.level.filter((e=>e.levelName===a)).flatMap((e=>e.lessonTypes.filter((e=>e.typeName==r)).flatMap((e=>e.date))))))));s?c(m):l&&c(l),i(T),o(d)}catch(T){d(T.message)}finally{m(!1)}};t(6412);var T=t(579);const p=()=>{const[e,a]=(0,l.useState)(null),[t,h]=(0,l.useState)(!0),[p,f]=(0,l.useState)(null),[U,u]=(0,l.useState)([]),[N,v]=(0,l.useState)(),[j,x]=(0,l.useState)([]),[y,S]=(0,l.useState)(1),$=(0,s.zy)(),{level:I}=$.state||{},{language:b}=$.state||{},{lessonTypes:D}=$.state||{},{lang_from_general_cal:_}=$.state||{},{schoolId:M}=$.state||{},{count:O}=$.state||{};console.log(_,I,D,M,O);const w=localStorage.getItem("selectedDates");console.log(M);const C=()=>b?"/date":"/final";return(0,l.useEffect)((()=>{Object.keys(localStorage);localStorage.setItem("OrderId",[]),g(M,I,w,b,_,D,v,u,a,f,h)}),[]),t?(0,T.jsx)("div",{className:"loading",children:"Loading..."}):p?(0,T.jsxs)("div",{className:"error",children:["Error: ",p]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:"main",children:(0,T.jsxs)("div",{className:"container",children:[(0,T.jsx)("div",{className:"logo",children:(0,T.jsx)("div",{className:"logo-items",children:(0,T.jsx)(r.N_,{to:`/${M}`,children:(0,T.jsx)("img",{src:c.A,alt:"Logo"})})})}),(0,T.jsxs)("div",{className:"container-items-block",children:[(0,T.jsx)("h1",{className:"teacher-title",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0432\u0447\u0438\u0442\u0435\u043b\u044f"}),e&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{className:"teachers-data",children:e.map(((e,a)=>(0,T.jsxs)("div",{className:"teacher",children:[(0,T.jsxs)("div",{className:"teacherData",children:[(0,T.jsx)("div",{className:"teacherImg",children:(0,T.jsx)("img",{src:d,alt:""})}),(0,T.jsxs)("div",{className:"name-and-btn",children:[(0,T.jsx)("div",{className:"teacher-link",children:(0,T.jsx)(r.N_,{to:"/teacherPage",state:{teacher:e},children:(0,T.jsx)("p",{children:e.data.teacherName})})}),i(e,w,_,I,n.u,D).length<=0?(0,T.jsx)(r.N_,{to:C(),state:{teacherDate:e.data.lang.filter((e=>e.lang===b)),level:I,lang_from_general_cal:N,teacherId:e.data.teacherId,teacherName:e.data.teacherName,lessonTypes:D,schoolId:M,count:O||y},className:"select-btn",children:(0,T.jsx)("div",{children:(0,T.jsx)("p",{children:"\u041e\u0431\u0440\u0430\u0442\u0438"})})}):(0,T.jsx)("div",{className:"select-btn",children:(0,T.jsx)("div",{className:"teacher-times",children:i(e,w,_,I,n.u).length>0?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("ul",{className:"teachers-times",children:i(e,w,_,I,n.u).map(((a,t)=>(0,T.jsx)("li",{onClick:()=>o(e,N,I,D,a,x,j),style:{cursor:"pointer",backgroundColor:j.includes(`${e.data.teacherName}, ${e.data.teacherId}, ${N}, ${I}, ${D}, ${a}`)?"#205C48":"#D9D9D9",color:j.includes(`${e.data.teacherName}, ${e.data.teacherId}, ${N}, ${I}, ${D}, ${a}`)?"white":"#205C48"},children:(0,n.r)(a)},t)))}),"TUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUTTTTTTTTTTTTTTTTTTTTTTTTTTTT"]}):(0,T.jsx)("div",{children:"ERROR"})})})]})]}),(0,T.jsx)("hr",{})]},a)))}),e.some((e=>i(e,w,_,I,n.u).length>0))&&(0,T.jsx)(r.N_,{to:C(),state:{teacherDate:e[0].data.lang.filter((e=>e.lang===b)),level:I,lang_from_general_cal:N,teacherId:e[0].data.teacherId,lessonTypes:D,schoolId:M,count:O||y},className:"select-btn",children:(0,T.jsx)("p",{children:"\u0414\u0430\u043b\u0456"})})]})]})]})}),(0,T.jsx)(m.A,{})]})}}}]);
//# sourceMappingURL=534.0fdc7ff7.chunk.js.map