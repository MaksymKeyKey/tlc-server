"use strict";(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[562],{5501:(e,t,s)=>{s.d(t,{r:()=>n,u:()=>r});s(2573);function r(e){const t=e.replace("\u0440.","").replace("\u043e","").trim(),[s,r,n,l,a,i]=t.split(" "),c={"\u0441\u0456\u0447\u043d\u044f":"January","\u043b\u044e\u0442\u043e\u0433\u043e":"February","\u0431\u0435\u0440\u0435\u0437\u043d\u044f":"March","\u043a\u0432\u0456\u0442\u043d\u044f":"April","\u0442\u0440\u0430\u0432\u043d\u044f":"May","\u0447\u0435\u0440\u0432\u043d\u044f":"June","\u043b\u0438\u043f\u043d\u044f":"July","\u0441\u0435\u0440\u043f\u043d\u044f":"August","\u0432\u0435\u0440\u0435\u0441\u043d\u044f":"September","\u0436\u043e\u0432\u0442\u043d\u044f":"October","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430":"November","\u0433\u0440\u0443\u0434\u043d\u044f":"December"}[r];return new Date(`${c} ${s}, ${n} ${i}.000+00:00`).toUTCString()}const n=e=>{const t=new Date(e);return`${t.getUTCDate()} ${["\u0441\u0456\u0447\u043d\u044f","\u043b\u044e\u0442\u043e\u0433\u043e","\u0431\u0435\u0440\u0435\u0437\u043d\u044f","\u043a\u0432\u0456\u0442\u043d\u044f","\u0442\u0440\u0430\u0432\u043d\u044f","\u0447\u0435\u0440\u0432\u043d\u044f","\u043b\u0438\u043f\u043d\u044f","\u0441\u0435\u0440\u043f\u043d\u044f","\u0432\u0435\u0440\u0435\u0441\u043d\u044f","\u0436\u043e\u0432\u0442\u043d\u044f","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043d\u044f"][t.getUTCMonth()]} ${t.getUTCFullYear()} \u0440. \u043e ${String(t.getUTCHours()).padStart(2,"0")}:${String(t.getUTCMinutes()).padStart(2,"0")}`}},7562:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var r=s(5043),n=s(6213),l=s(1899),a=s.n(l),i=(s(5015),s(5475)),c=s(5501),o=s(579);const d=()=>{const[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)([]),[d,h]=(0,r.useState)(""),[m,u]=(0,r.useState)([]),[g,x]=(0,r.useState)(null),[j,p]=(0,r.useState)([]),y=localStorage.getItem("schoolId");(0,r.useEffect)((()=>{f(t,n.A,l)}),[]),(0,r.useEffect)((()=>{if(s.length>0){const e=s.flatMap((e=>{try{return e.time.map((e=>e.teacherName))}catch(t){return console.error("Invalid time format:",e.time),[]}}));u([...new Set(e)]);const t=s.flatMap((e=>e.time.map((e=>new Date(e.time)))));p([...new Set(t)])}}),[s]);const f=async(e,t,s)=>{const r=localStorage.getItem("token");if(console.log(r),r)try{const n=await t.get("http://13.60.221.226/api/me",{headers:{Authorization:`Bearer ${r}`}}),{user:l,orders:a}=n.data;e(l),s(a)}catch(n){console.error("Error fetching user data:",n)}};return(0,o.jsxs)("div",{className:"user-profile",children:[(0,o.jsx)("h2",{children:"\u041e\u0441\u043e\u0431\u0438\u0441\u0442\u0438\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442"}),e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{children:["\u0406\u043c'\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430: ",e.username]}),(0,o.jsxs)("p",{children:["Email: ",e.email]}),(0,o.jsxs)("p",{children:["\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",e.phone]}),(0,o.jsx)("h3",{children:"\u0412\u0430\u0448\u0456 \u0437\u0430\u043f\u0438\u0441\u0438"}),(0,o.jsx)(a(),{selected:g,onChange:e=>x(e),dateFormat:"yyyy-MM-dd",isClearable:!0,placeholderText:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0430\u0442\u0443 \u0434\u043b\u044f \u0444\u0456\u043b\u044c\u0442\u0440\u0430\u0446\u0456\u0457 \u0437\u0430\u043f\u0438\u0441\u0456\u0432",inline:!0,highlightDates:j}),g&&(0,o.jsxs)("p",{children:["\u0412\u0438\u0431\u0440\u0430\u043d\u0430 \u0434\u0430\u0442\u0430: ",g.toLocaleDateString()]}),s.length>0?(0,o.jsx)("ul",{className:"orders-list",children:((e,t)=>t?e.filter((e=>(e.time||[]).some((e=>new Date(e.time).getDate()),new Date(g).getDate()))):e)(s,g).map(((e,t)=>{let s=[];try{s=e.time.map((e=>({teacherName:e.teacherName,lang:e.lang,levelName:e.levelName,lessonTypes:e.lessonTypes,time:(0,c.r)(e.time),payment_status:e.payment_status})))}catch(n){console.error("Invalid time format:",e.time)}const r=s?s.filter((e=>{const t=new Date((0,c.u)(e.time));return t instanceof Date&&!isNaN(t)&&g instanceof Date&&!isNaN(g)&&t.getDate()===g.getDate()})):[];return 0===r.length?null:(console.log(r),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"\u041c\u043e\u0432\u0430:"})," ",e.lang," ",(0,o.jsx)("br",{}),(0,o.jsx)("strong",{children:"\u041a\u0443\u0440\u0441:"})," ",e.levelName," ",(0,o.jsx)("br",{}),(0,o.jsx)("strong",{children:"\u0427\u0430\u0441\u0438:"}),(0,o.jsx)("ul",{children:r.map(((t,s)=>(0,o.jsxs)("li",{style:{marginBottom:"10px"},children:[(0,o.jsx)("strong",{children:"\u0417\u0430\u043f\u0438\u0441 \u043d\u0430 \u0443\u0440\u043e\u043a:"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c:"})," ",t.teacherName]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"\u041c\u043e\u0432\u0430:"})," ",t.lang]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"\u0420\u0456\u0432\u0435\u043d\u044c:"})," ",t.levelName]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443:"})," ",t.lessonTypes]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"\u0427\u0430\u0441:"})," ",t.time]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u043f\u043b\u0430\u0442\u0438:"})," ",t.payment_status]}),e.students.length>0&&(0,o.jsxs)("div",{style:{marginTop:"10px"},children:[(0,o.jsx)("strong",{children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442\u0438:"}),(0,o.jsx)("ul",{children:e.students.map(((e,t)=>(0,o.jsxs)("li",{children:[(0,o.jsxs)("div",{children:["\u0406\u043c'\u044f: ",e.name]}),(0,o.jsxs)("div",{children:["Email: ",e.email]}),(0,o.jsxs)("div",{children:["\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",e.phone]})]},t)))})]})]},s)))})]},t))}))}):(0,o.jsx)("p",{children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456."})]}):(0,o.jsx)("p",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430..."}),(0,o.jsx)(i.N_,{to:`/${y}`,children:(0,o.jsx)("button",{className:"btn-logout",onClick:async()=>{try{200===(await n.A.post("http://13.60.221.226/api/logout")).status&&(t(null),l([]),localStorage.removeItem("token"),console.log("Logged out successfully"))}catch(e){console.error("Error logging out:",e)}},children:"\u0412\u0438\u0439\u0442\u0438"})})]})}}}]);
//# sourceMappingURL=562.a16140ba.chunk.js.map