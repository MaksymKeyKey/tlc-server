(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[785],{5501:(e,s,l)=>{"use strict";l.d(s,{r:()=>a,u:()=>t});l(2573);function t(e){const s=e.replace("\u0440.","").replace("\u043e","").trim(),[l,t,a,r,n,c]=s.split(" "),i={"\u0441\u0456\u0447\u043d\u044f":"January","\u043b\u044e\u0442\u043e\u0433\u043e":"February","\u0431\u0435\u0440\u0435\u0437\u043d\u044f":"March","\u043a\u0432\u0456\u0442\u043d\u044f":"April","\u0442\u0440\u0430\u0432\u043d\u044f":"May","\u0447\u0435\u0440\u0432\u043d\u044f":"June","\u043b\u0438\u043f\u043d\u044f":"July","\u0441\u0435\u0440\u043f\u043d\u044f":"August","\u0432\u0435\u0440\u0435\u0441\u043d\u044f":"September","\u0436\u043e\u0432\u0442\u043d\u044f":"October","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430":"November","\u0433\u0440\u0443\u0434\u043d\u044f":"December"}[t];return new Date(`${i} ${l}, ${a} ${c}`).toUTCString()}const a=e=>{const s=new Date(e);return`${s.getUTCDate()} ${["\u0441\u0456\u0447\u043d\u044f","\u043b\u044e\u0442\u043e\u0433\u043e","\u0431\u0435\u0440\u0435\u0437\u043d\u044f","\u043a\u0432\u0456\u0442\u043d\u044f","\u0442\u0440\u0430\u0432\u043d\u044f","\u0447\u0435\u0440\u0432\u043d\u044f","\u043b\u0438\u043f\u043d\u044f","\u0441\u0435\u0440\u043f\u043d\u044f","\u0432\u0435\u0440\u0435\u0441\u043d\u044f","\u0436\u043e\u0432\u0442\u043d\u044f","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043d\u044f"][s.getUTCMonth()]} ${s.getUTCFullYear()} \u0440. \u043e ${String(s.getUTCHours()).padStart(2,"0")}:${String(s.getUTCMinutes()).padStart(2,"0")}`}},5853:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>S});var t=l(5043),a=l(3216),r=l(5501),n=l(579);const c=(e,s,l,t,a,c,i,d)=>{const o=localStorage.getItem("selectedSlots");if(o)try{const e=JSON.parse(o);return Array.isArray(e)?(0,n.jsxs)("div",{children:[(0,n.jsx)("ul",{style:{backgroundColor:"#F4F4F4"},className:"resultList",children:(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u041c\u043e\u0432\u0430"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0420\u0456\u0432\u0435\u043d\u044c"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0414\u0430\u0442\u0430"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"})})]})}),(0,n.jsx)("div",{className:"order-ul",children:e.map(((e,s)=>{const[l,t,a,c,i,d]=e.split(", "),o=(0,r.r)(d);return(0,n.jsx)("ul",{className:"resultList",children:(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u041c\u043e\u0432\u0430"}),(0,n.jsx)("div",{className:"resultItem",children:a})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0420\u0456\u0432\u0435\u043d\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:c})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443"}),(0,n.jsx)("div",{className:"resultItem",children:i})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:l})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0414\u0430\u0442\u0430"}),(0,n.jsx)("div",{className:"resultItem",children:o})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:"1000 \u0433\u0440\u043d"})]})]})},s)}))}),(0,n.jsx)("div",{className:"totalPrice",children:"\u0414\u041e \u0421\u041f\u041b\u0410\u0422\u0418: 2000 \u0433\u0440\u043d"})]}):(0,n.jsx)("p",{children:"No valid slots found."})}catch(u){return console.error("Error parsing selectedSlots",u),(0,n.jsx)("p",{children:"Error retrieving slots."})}else{const e=localStorage.getItem("selectedDates");if(e)try{const t=JSON.parse(e);return Array.isArray(t)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ul",{style:{backgroundColor:"#F4F4F4"},className:"resultList",children:(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u041c\u043e\u0432\u0430"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0420\u0456\u0432\u0435\u043d\u044c"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0414\u0430\u0442\u0430"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"})})]})}),(0,n.jsx)("div",{className:"order-ul",children:t.map(((e,t)=>(0,n.jsx)("ul",{className:"resultList",children:(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u041c\u043e\u0432\u0430"}),(0,n.jsx)("div",{className:"resultItem",children:l})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0420\u0456\u0432\u0435\u043d\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:s})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443"}),(0,n.jsx)("div",{className:"resultItem",children:c})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:a})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0414\u0430\u0442\u0430"}),(0,n.jsx)("div",{className:"resultItem",children:e})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:"1000 \u0433\u0440\u043d"})]})]})},t)))}),(0,n.jsx)("div",{className:"totalPrice",children:"\u0414\u041e \u0421\u041f\u041b\u0410\u0422\u0418: 2000 \u0433\u0440\u043d"})]}):(0,n.jsx)("p",{children:"No valid times found."})}catch(u){return console.error("Error parsing selectedTimes",u),(0,n.jsx)("p",{children:"Error retrieving times."})}}return(0,n.jsx)("p",{children:"No selected slots or times found."})};var i=l(6111),d=l.n(i);const o=e=>{const s={public_key:"sandbox_i38312250017",version:"3",action:"pay",subscribe_periodicity:"month",amount:"55",currency:"UAH",description:"Description",order_id:e,sandbox:"sandbox",return_url:"http://localhost:3000/final"},l=btoa(JSON.stringify(s)),t=`sandbox_FRDaasO0MmnhPbbp9U3d8DylKxr6ah8ppwkWKCcY${l}sandbox_FRDaasO0MmnhPbbp9U3d8DylKxr6ah8ppwkWKCcY`;return`https://www.liqpay.ua/api/3/checkout?data=${l}&signature=${d().SHA1(t).toString(d().enc.Base64)}`};var u=l(6213);const h=async e=>{let{username:s,email:l,phone:t,order:a,time:n,lang:c,levelName:i,teacherId:d,teacherName:o,lessonTypes:h,selectedSlots:m,count:x,students:j,setMessage:v,setErrorMessage:p}=e;try{const e=await u.A.post("http://13.60.221.226/api/registerorder",{username:s,email:l,phone:t,order:a,time:n,lang:c,levelName:i,teacherId:d,teacherName:o,lessonTypes:h,selectedSlots:m,count:x,students:j,payment_status:"\u041d\u0435 \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"});if(201===e.status){v(`\u0427\u0430\u0441 \u0437\u0430\u0431\u0440\u043e\u043d\u044c\u043e\u0432\u0430\u043d\u043e: ${e.data.unBookedSlots.map((e=>(0,r.r)(e))).join(", ")}`)}}catch(N){if(N.response&&400===N.response.status){const e=N.response.data.bookedSlots.map((e=>(0,r.r)(e))),s=N.response.data.unBookedSlots.map((e=>(0,r.r)(e)));let l=`\u0412\u0438 \u0432\u0436\u0435 \u043c\u0430\u0454\u0442\u0435 \u0437\u0430\u043f\u0438\u0441 \u043d\u0430 \u0447\u0430\u0441: ${e.join(", ")}`;s.length>0&&(l+=`\n\u0423\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0430\u0431\u0440\u043e\u043d\u044c\u043e\u0432\u0430\u043d\u0456: ${s.join(", ")}`),p(l)}else p(N.response?N.response.data.error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}};var m=l(5475),x=l(8571),j=l(2064),v=l(1),p=l(6383);l(6412),l(3953);const N=async function(e,s){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const n=localStorage.getItem("token");if(n)try{const c=await s.get("http://13.60.221.226/api/me",{headers:{Authorization:`Bearer ${n}`}});console.log("Response Data:",c.data);const{user:i,orders:d}=c.data;e(i),l(i.username),t(i.email),a(i.phone),r(d)}catch(c){console.error("Error fetching user data:",c)}};var g=l(2508),b=(l(8643),l(8929));const S=()=>{const[e,s]=(0,t.useState)(""),[l,i]=(0,t.useState)(""),[d,S]=(0,t.useState)(""),[y,E]=(0,t.useState)(""),[f,I]=(0,t.useState)(null),[k,H]=(0,t.useState)(""),[C,M]=(0,t.useState)(""),[A,$]=(0,t.useState)(""),[w,_]=(0,t.useState)(null),[D,F]=(0,t.useState)(null),[T,O]=(0,t.useState)(null),[U,L]=(0,t.useState)([]),[B,J]=(0,t.useState)(!1),[K,P]=(0,t.useState)("login"),[R,Y]=(0,t.useState)(!1),[z,W]=(0,t.useState)(null),[q,G]=(0,t.useState)(),[Q,V]=(0,t.useState)(0),[X,Z]=(0,t.useState)(!1),[ee,se]=(0,t.useState)(!1),le=(0,a.zy)(),{language:te,level:ae,lang_from_general_cal:re,teacherId:ne,teacherName:ce,lessonTypes:ie,count:de,schoolId:oe}=le.state||{};(0,t.useEffect)((()=>{const s=setInterval((async()=>{try{const a=await u.A.get("http://13.60.221.226/api/checkpaymentstatus",{params:{orderId:q}});if(console.log(a.data),"success"===a.data){try{W("\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"),M("\u041e\u043f\u043b\u0430\u0442\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430.");const s=await u.A.post("http://13.60.221.226/api/registerorder",{username:e,email:l,phone:d,order:w,time:D,lang:y,levelName:k,teacherId:ne,teacherName:ce,lessonTypes:ie,selectedSlots:T,count:de,students:U,payment_status:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"});if(201===s.status){const e=s.data.unBookedSlots.map((e=>(0,r.r)(e)));M(`\u0427\u0430\u0441 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d: ${e.join(", ")}`)}}catch(t){if(t.response&&400===t.response.status){const e=t.response.data.bookedSlots.map((e=>(0,r.r)(e))),s=t.response.data.unBookedSlots.map((e=>(0,r.r)(e)));let l=`\u0412\u0438 \u0432\u0436\u0435 \u043c\u0430\u0454\u0442\u0435 \u0437\u0430\u043f\u0438\u0441 \u043d\u0430 \u0447\u0430\u0441: ${e.join(", ")}`;s.length>0&&(l+=`\n\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u044b: ${s.join(", ")}`),$(l)}else $(t.response?t.response.data.error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}clearInterval(s)}}catch(t){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043e\u043f\u043b\u0430\u0442\u044b",t)}}),5e3);return()=>clearInterval(s)}),[q]),(0,t.useEffect)((()=>{(async()=>{await N(I,u.A,s,i,S);const e=localStorage.getItem("data"),l=localStorage.getItem("selectedDates"),t=localStorage.getItem("selectedSlots");if(_(e),F(l),O(t),te?E(te):re&&E(re),H(ae),de){const e=Array.from({length:de},(()=>({name:"",email:"",phone:""})));L(e)}})()}),[de]);const ue=(e,s,l)=>{const t=[...U];t[e][s]=l,L(t)},he=function(){Y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:!R)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"main final",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"logo",children:(0,n.jsx)("div",{className:"logo-items",children:(0,n.jsx)(m.N_,{to:`/${oe}`,children:(0,n.jsx)("img",{src:x.A,alt:"Logo"})})})}),(0,n.jsxs)("div",{className:"auth-form-container",children:[(0,n.jsxs)(j.A,{className:"modal-content",isOpen:B,onClose:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!B;J(e),Y(e)}(!1),children:[(0,n.jsxs)("div",{className:"tabs",children:[(0,n.jsx)("button",{className:"login"===K?"active":"",onClick:()=>P("login"),children:"\u0412\u0445\u0456\u0434"}),(0,n.jsx)("button",{className:"register"===K?"active":"",onClick:()=>P("register"),children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"})]}),"login"===K?(0,n.jsx)(v.A,{}):(0,n.jsx)(p.A,{})]}),(0,n.jsx)("h2",{children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u043f\u0438\u0441\u0443"}),(0,n.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=`order_${Math.random().toString(36).substr(2,9)}`;G(e),localStorage.setItem("OrderId",e);const s=o(e);window.open(s,"_blank")}catch(s){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u043f\u043b\u0430\u0442\u0435 \u0438\u043b\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",s),$("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u043f\u043b\u0430\u0442\u0435")}},children:[(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("img",{src:g.A,alt:""}),(0,n.jsx)("input",{type:"email",placeholder:"Email",value:l,onChange:e=>i(e.target.value)})]}),U.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{children:["\u0421\u0442\u0443\u0434\u0435\u043d\u0442 ",Q+1]}),(0,n.jsx)("input",{type:"text",placeholder:"\u0406\u043c'\u044f \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430",value:U[Q].name,onChange:e=>ue(Q,"name",e.target.value)}),(0,n.jsx)("input",{type:"phone",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430",value:U[Q].phone,onChange:e=>ue(Q,"phone",e.target.value)})]},Q),(0,n.jsxs)("div",{className:"actions",children:[Q>0&&(0,n.jsx)("button",{type:"button",onClick:()=>{Q>0&&V(Q-1)},children:"\u041d\u0430\u0437\u0430\u0434"}),Q<U.length-1&&(0,n.jsx)("button",{type:"button",onClick:()=>{Q<U.length-1&&V(Q+1)},children:"\u0414\u0430\u043b\u0456"}),Q===U.length-1&&(0,n.jsx)("button",{type:"button",onClick:()=>he(!0),children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u0438"})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(j.A,{className:"modal-content-result",isOpen:R,onClose:()=>he(!1),children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("h2",{children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,n.jsx)("div",{className:"studentsList-btn",onClick:()=>se(!0),children:"\u0423\u0447\u043d\u0456"}),ee&&(0,n.jsxs)("div",{className:"studentsList",children:[(0,n.jsx)("span",{className:"modal-close",onClick:()=>se(!1),children:"\xd7"}),(0,n.jsx)("div",{className:"triangle"}),(0,n.jsx)("div",{className:"contents-block",children:U.map(((e,s)=>(0,n.jsx)("div",{className:"content",children:(0,n.jsx)("p",{children:e.name})},s)))})]}),te&&(0,n.jsxs)("div",{children:[ce,c(te,ae,re,ne,ce,ie,de,oe)]}),re&&(0,n.jsx)("div",{children:c(te,ae,re,ne,ce,ie,de,oe)})]}),(0,n.jsxs)("div",{className:"pay-btns",children:[(0,n.jsx)("button",{type:"submit",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u0438"}),(0,n.jsx)("button",{type:"button",onClick:()=>{h({username:e,email:l,phone:d,order:w,time:D,lang:y,levelName:k,teacherId:ne,teacherName:ce,lessonTypes:ie,selectedSlots:T,count:de,students:U,setMessage:M,setErrorMessage:$}),he(!1)},children:"\u0417\u0440\u043e\u0431\u0438\u0442\u0438 \u0437\u0430\u044f\u0432\u043a\u0443"})]}),(0,n.jsx)("div",{className:"status-pay",children:(0,n.jsx)("h3",{children:z&&(0,n.jsxs)("div",{children:["\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u043b\u0430\u0442\u0435\u0436\u0443: ",z]})})})]})})}),(0,n.jsx)("p",{children:C}),(0,n.jsx)("p",{className:"error-message",children:A})]})]})]})}),(0,n.jsx)(b.A,{})]})}},477:()=>{}}]);
//# sourceMappingURL=785.136fa92c.chunk.js.map