(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[785],{5501:(e,s,t)=>{"use strict";t.d(s,{r:()=>l,u:()=>a});t(2573);function a(e){const s=e.replace("\u0440.","").replace("\u043e","").trim(),[t,a,l,r,n,c]=s.split(" "),i={"\u0441\u0456\u0447\u043d\u044f":"January","\u043b\u044e\u0442\u043e\u0433\u043e":"February","\u0431\u0435\u0440\u0435\u0437\u043d\u044f":"March","\u043a\u0432\u0456\u0442\u043d\u044f":"April","\u0442\u0440\u0430\u0432\u043d\u044f":"May","\u0447\u0435\u0440\u0432\u043d\u044f":"June","\u043b\u0438\u043f\u043d\u044f":"July","\u0441\u0435\u0440\u043f\u043d\u044f":"August","\u0432\u0435\u0440\u0435\u0441\u043d\u044f":"September","\u0436\u043e\u0432\u0442\u043d\u044f":"October","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430":"November","\u0433\u0440\u0443\u0434\u043d\u044f":"December"}[a];return new Date(`${i} ${t}, ${l} ${c}`).toUTCString()}const l=e=>{const s=new Date(e);return`${s.getUTCDate()} ${["\u0441\u0456\u0447\u043d\u044f","\u043b\u044e\u0442\u043e\u0433\u043e","\u0431\u0435\u0440\u0435\u0437\u043d\u044f","\u043a\u0432\u0456\u0442\u043d\u044f","\u0442\u0440\u0430\u0432\u043d\u044f","\u0447\u0435\u0440\u0432\u043d\u044f","\u043b\u0438\u043f\u043d\u044f","\u0441\u0435\u0440\u043f\u043d\u044f","\u0432\u0435\u0440\u0435\u0441\u043d\u044f","\u0436\u043e\u0432\u0442\u043d\u044f","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043d\u044f"][s.getUTCMonth()]} ${s.getUTCFullYear()} \u0440. \u043e ${String(s.getUTCHours()).padStart(2,"0")}:${String(s.getUTCMinutes()).padStart(2,"0")}`}},5853:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(5043),l=t(3216),r=t(5501),n=t(579);const c=()=>{const e=localStorage.getItem("selectedSlots");if(e)try{const s=JSON.parse(e);return Array.isArray(s)?(0,n.jsxs)("div",{children:[(0,n.jsx)("ul",{style:{backgroundColor:"#F4F4F4"},className:"resultList",children:(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u041c\u043e\u0432\u0430"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0420\u0456\u0432\u0435\u043d\u044c"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0414\u0430\u0442\u0430"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"})})]})}),(0,n.jsx)("div",{className:"order-ul",children:s.map(((e,s)=>{const[t,a,l,c,i,o]=e.split(", "),d=(0,r.r)(o);return(0,n.jsx)("ul",{className:"resultList",children:(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u041c\u043e\u0432\u0430"}),(0,n.jsx)("div",{className:"resultItem",children:l})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0420\u0456\u0432\u0435\u043d\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:c})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443"}),(0,n.jsx)("div",{className:"resultItem",children:i})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:t})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0414\u0430\u0442\u0430"}),(0,n.jsx)("div",{className:"resultItem",children:d})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:"1000 \u0433\u0440\u043d"})]})]})},s)}))}),(0,n.jsx)("div",{className:"totalPrice",children:"\u0414\u041e \u0421\u041f\u041b\u0410\u0422\u0418: 2000 \u0433\u0440\u043d"})]}):(0,n.jsx)("p",{children:"No valid slots found."})}catch(s){return console.error("Error parsing selectedSlots",s),(0,n.jsx)("p",{children:"Error retrieving slots."})}else{const e=localStorage.getItem("selectedDates");if(e)try{const s=JSON.parse(e);return Array.isArray(s)?s.map(((e,s)=>(0,n.jsx)("ul",{children:(0,n.jsx)("li",{children:e})},s))):(0,n.jsx)("p",{children:"No valid times found."})}catch(s){return console.error("Error parsing selectedTimes",s),(0,n.jsx)("p",{children:"Error retrieving times."})}}return(0,n.jsx)("p",{children:"No selected slots or times found."})};var i=t(6111),o=t.n(i);const d=e=>{const s={public_key:"sandbox_i38312250017",version:"3",action:"pay",subscribe_periodicity:"month",amount:"55",currency:"UAH",description:"Description",order_id:e,sandbox:"sandbox",return_url:"http://localhost:3000/final"},t=btoa(JSON.stringify(s)),a=`sandbox_FRDaasO0MmnhPbbp9U3d8DylKxr6ah8ppwkWKCcY${t}sandbox_FRDaasO0MmnhPbbp9U3d8DylKxr6ah8ppwkWKCcY`;return`https://www.liqpay.ua/api/3/checkout?data=${t}&signature=${o().SHA1(a).toString(o().enc.Base64)}`};var u=t(6213);const h=async e=>{let{username:s,email:t,phone:a,order:l,time:n,lang:c,levelName:i,teacherId:o,teacherName:d,lessonTypes:h,selectedSlots:m,count:p,students:x,setMessage:j,setErrorMessage:v}=e;try{const e=await u.A.post("http://13.60.221.226/api/registerorder",{username:s,email:t,phone:a,order:l,time:n,lang:c,levelName:i,teacherId:o,teacherName:d,lessonTypes:h,selectedSlots:m,count:p,students:x,payment_status:"\u041d\u0435 \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"});if(201===e.status){j(`\u0427\u0430\u0441 \u0437\u0430\u0431\u0440\u043e\u043d\u044c\u043e\u0432\u0430\u043d\u043e: ${e.data.unBookedSlots.map((e=>(0,r.r)(e))).join(", ")}`)}}catch(g){if(g.response&&400===g.response.status){const e=g.response.data.bookedSlots.map((e=>(0,r.r)(e))),s=g.response.data.unBookedSlots.map((e=>(0,r.r)(e)));let t=`\u0412\u0438 \u0432\u0436\u0435 \u043c\u0430\u0454\u0442\u0435 \u0437\u0430\u043f\u0438\u0441 \u043d\u0430 \u0447\u0430\u0441: ${e.join(", ")}`;s.length>0&&(t+=`\n\u0423\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0430\u0431\u0440\u043e\u043d\u044c\u043e\u0432\u0430\u043d\u0456: ${s.join(", ")}`),v(t)}else v(g.response?g.response.data.error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}};var m=t(5475),p=t(8571),x=t(2064),j=t(1),v=t(6383);t(6412),t(3953);const g=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const n=localStorage.getItem("token");if(n)try{const c=await s.get("http://13.60.221.226/api/me",{headers:{Authorization:`Bearer ${n}`}});console.log("Response Data:",c.data);const{user:i,orders:o}=c.data;e(i),t(i.username),a(i.email),l(i.phone),r(o)}catch(c){console.error("Error fetching user data:",c)}};var N=t(2508),S=(t(8643),t(8929));const y=()=>{const[e,s]=(0,a.useState)(""),[t,i]=(0,a.useState)(""),[o,y]=(0,a.useState)(""),[b,f]=(0,a.useState)(""),[k,C]=(0,a.useState)(null),[I,E]=(0,a.useState)(""),[A,$]=(0,a.useState)(""),[M,w]=(0,a.useState)(""),[H,_]=(0,a.useState)(null),[D,T]=(0,a.useState)(null),[F,O]=(0,a.useState)(null),[U,B]=(0,a.useState)([]),[J,L]=(0,a.useState)(!1),[K,P]=(0,a.useState)("login"),[R,Y]=(0,a.useState)(!1),[z,W]=(0,a.useState)(null),[q,G]=(0,a.useState)(),[Q,V]=(0,a.useState)(0),[X,Z]=(0,a.useState)(!1),[ee,se]=(0,a.useState)(!1),te=(0,l.zy)(),{language:ae,level:le,lang_from_general_cal:re,teacherId:ne,teacherName:ce,lessonTypes:ie,count:oe,schoolId:de}=te.state||{};(0,a.useEffect)((()=>{const s=setInterval((async()=>{try{const l=await u.A.get("http://13.60.221.226/api/checkpaymentstatus",{params:{orderId:q}});if(console.log(l.data),"success"===l.data){try{W("\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"),$("\u041e\u043f\u043b\u0430\u0442\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430.");const s=await u.A.post("http://13.60.221.226/api/registerorder",{username:e,email:t,phone:o,order:H,time:D,lang:b,levelName:I,teacherId:ne,teacherName:ce,lessonTypes:ie,selectedSlots:F,count:oe,students:U,payment_status:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"});if(201===s.status){const e=s.data.unBookedSlots.map((e=>(0,r.r)(e)));$(`\u0427\u0430\u0441 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d: ${e.join(", ")}`)}}catch(a){if(a.response&&400===a.response.status){const e=a.response.data.bookedSlots.map((e=>(0,r.r)(e))),s=a.response.data.unBookedSlots.map((e=>(0,r.r)(e)));let t=`\u0412\u0438 \u0432\u0436\u0435 \u043c\u0430\u0454\u0442\u0435 \u0437\u0430\u043f\u0438\u0441 \u043d\u0430 \u0447\u0430\u0441: ${e.join(", ")}`;s.length>0&&(t+=`\n\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u044b: ${s.join(", ")}`),w(t)}else w(a.response?a.response.data.error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}clearInterval(s)}}catch(a){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043e\u043f\u043b\u0430\u0442\u044b",a)}}),5e3);return()=>clearInterval(s)}),[q]),(0,a.useEffect)((()=>{(async()=>{await g(C,u.A,s,i,y);const e=localStorage.getItem("data"),t=localStorage.getItem("selectedDates"),a=localStorage.getItem("selectedSlots");if(_(e),T(t),O(a),ae?f(ae):re&&f(re),E(le),oe){const e=Array.from({length:oe},(()=>({name:"",email:"",phone:""})));B(e)}})()}),[oe]);const ue=(e,s,t)=>{const a=[...U];a[e][s]=t,B(a)},he=function(){Y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:!R)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"main final",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"logo",children:(0,n.jsx)("div",{className:"logo-items",children:(0,n.jsx)(m.N_,{to:`/${de}`,children:(0,n.jsx)("img",{src:p.A,alt:"Logo"})})})}),(0,n.jsxs)("div",{className:"auth-form-container",children:[(0,n.jsxs)(x.A,{className:"modal-content",isOpen:J,onClose:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!J;L(e),Y(e)}(!1),children:[(0,n.jsxs)("div",{className:"tabs",children:[(0,n.jsx)("button",{className:"login"===K?"active":"",onClick:()=>P("login"),children:"\u0412\u0445\u0456\u0434"}),(0,n.jsx)("button",{className:"register"===K?"active":"",onClick:()=>P("register"),children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"})]}),"login"===K?(0,n.jsx)(j.A,{}):(0,n.jsx)(v.A,{})]}),(0,n.jsx)("h2",{children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u043f\u0438\u0441\u0443"}),(0,n.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=`order_${Math.random().toString(36).substr(2,9)}`;G(e),localStorage.setItem("OrderId",e);const s=d(e);window.open(s,"_blank")}catch(s){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u043f\u043b\u0430\u0442\u0435 \u0438\u043b\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",s),w("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u043f\u043b\u0430\u0442\u0435")}},children:[(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("img",{src:N.A,alt:""}),(0,n.jsx)("input",{type:"email",placeholder:"Email",value:t,onChange:e=>i(e.target.value)})]}),U.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{children:["\u0421\u0442\u0443\u0434\u0435\u043d\u0442 ",Q+1]}),(0,n.jsx)("input",{type:"text",placeholder:"\u0406\u043c'\u044f \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430",value:U[Q].name,onChange:e=>ue(Q,"name",e.target.value)}),(0,n.jsx)("input",{type:"phone",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430",value:U[Q].phone,onChange:e=>ue(Q,"phone",e.target.value)})]},Q),(0,n.jsxs)("div",{className:"actions",children:[Q>0&&(0,n.jsx)("button",{type:"button",onClick:()=>{Q>0&&V(Q-1)},children:"\u041d\u0430\u0437\u0430\u0434"}),Q<U.length-1&&(0,n.jsx)("button",{type:"button",onClick:()=>{Q<U.length-1&&V(Q+1)},children:"\u0414\u0430\u043b\u0456"}),Q===U.length-1&&(0,n.jsx)("button",{type:"button",onClick:()=>he(!0),children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u0438"})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(x.A,{className:"modal-content-result",isOpen:R,onClose:()=>he(!1),children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("h2",{children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,n.jsx)("div",{className:"studentsList-btn",onClick:()=>se(!0),children:"\u0423\u0447\u043d\u0456"}),ee&&(0,n.jsxs)("div",{className:"studentsList",children:[(0,n.jsx)("span",{className:"modal-close",onClick:()=>se(!1),children:"\xd7"}),(0,n.jsx)("div",{className:"triangle"}),(0,n.jsx)("div",{className:"contents-block",children:U.map(((e,s)=>(0,n.jsx)("div",{className:"content",children:(0,n.jsx)("p",{children:e.name})},s)))})]}),ce&&(0,n.jsxs)("div",{children:[ce,c()]}),F&&(0,n.jsx)("div",{children:c()})]}),(0,n.jsxs)("div",{className:"pay-btns",children:[(0,n.jsx)("button",{type:"submit",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u0438"}),(0,n.jsx)("button",{type:"button",onClick:()=>{h({username:e,email:t,phone:o,order:H,time:D,lang:b,levelName:I,teacherId:ne,teacherName:ce,lessonTypes:ie,selectedSlots:F,count:oe,students:U,setMessage:$,setErrorMessage:w}),he(!1)},children:"\u0417\u0440\u043e\u0431\u0438\u0442\u0438 \u0437\u0430\u044f\u0432\u043a\u0443"})]}),(0,n.jsx)("div",{className:"status-pay",children:(0,n.jsx)("h3",{children:z&&(0,n.jsxs)("div",{children:["\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u043b\u0430\u0442\u0435\u0436\u0443: ",z]})})})]})})}),(0,n.jsx)("p",{children:A}),(0,n.jsx)("p",{className:"error-message",children:M})]})]})]})}),(0,n.jsx)(S.A,{})]})}},477:()=>{}}]);
//# sourceMappingURL=785.6aa46606.chunk.js.map