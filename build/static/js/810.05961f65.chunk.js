"use strict";(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[810],{5501:(e,a,t)=>{t.d(a,{r:()=>l,u:()=>s});t(2573);function s(e){const a=e.replace("\u0440.","").replace("\u043e","").trim(),[t,s,l,r,c,n]=a.split(" "),i={"\u0441\u0456\u0447\u043d\u044f":"January","\u043b\u044e\u0442\u043e\u0433\u043e":"February","\u0431\u0435\u0440\u0435\u0437\u043d\u044f":"March","\u043a\u0432\u0456\u0442\u043d\u044f":"April","\u0442\u0440\u0430\u0432\u043d\u044f":"May","\u0447\u0435\u0440\u0432\u043d\u044f":"June","\u043b\u0438\u043f\u043d\u044f":"July","\u0441\u0435\u0440\u043f\u043d\u044f":"August","\u0432\u0435\u0440\u0435\u0441\u043d\u044f":"September","\u0436\u043e\u0432\u0442\u043d\u044f":"October","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430":"November","\u0433\u0440\u0443\u0434\u043d\u044f":"December"}[s];return new Date(`${i} ${t}, ${l} ${n}`).toUTCString()}const l=e=>{const a=new Date(e);return`${a.getUTCDate()} ${["\u0441\u0456\u0447\u043d\u044f","\u043b\u044e\u0442\u043e\u0433\u043e","\u0431\u0435\u0440\u0435\u0437\u043d\u044f","\u043a\u0432\u0456\u0442\u043d\u044f","\u0442\u0440\u0430\u0432\u043d\u044f","\u0447\u0435\u0440\u0432\u043d\u044f","\u043b\u0438\u043f\u043d\u044f","\u0441\u0435\u0440\u043f\u043d\u044f","\u0432\u0435\u0440\u0435\u0441\u043d\u044f","\u0436\u043e\u0432\u0442\u043d\u044f","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043d\u044f"][a.getUTCMonth()]} ${a.getUTCFullYear()} \u0440. \u043e ${String(a.getUTCHours()).padStart(2,"0")}:${String(a.getUTCMinutes()).padStart(2,"0")}`}},2635:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var s=t(3216),l=t(5043),r=t(5475),c=t(8571),n=t(5501);const i=(e,a,t,s,l,r)=>{const c=localStorage.getItem(`availableTimes_${e.data.teacherId}`);if(c)try{return JSON.parse(c).map((e=>e.time))}catch(o){console.error("Invalid JSON string for availableTimes",o)}let n=[];if("string"===typeof a)try{n=JSON.parse(a),Array.isArray(n)||(console.error("parsedSelectedTimes is not an array:",n),n=[])}catch(o){console.error("Invalid JSON string for selectedTimes",o)}else Array.isArray(a)&&(n=a);const i=e.data.lang.filter((e=>e.lang===t)).flatMap((e=>e.level)).filter((e=>e.levelName===s)).flatMap((e=>e.lessonTypes.filter((e=>e.typeName==r)))).flatMap((e=>e.date)).flatMap((e=>e.workTime)).filter((e=>n.some((a=>new Date(new Date(e.time).getTime()+6e4*new Date(e.time).getTimezoneOffset()).getTime()===new Date(new Date(l(a))).getTime()&&e.slots>0))));return console.log(i),localStorage.setItem(`availableTimes_${e.data.teacherId}`,JSON.stringify(i)),i.map((e=>e.time))},o=(e,a,t,s,l,r,c)=>{const n=`${e.data.teacherName}, ${e.data.teacherId}, ${a}, ${t}, ${s}, ${l}`;if(c.includes(n)){const e=c.filter((e=>e!==n));r(e),localStorage.setItem("selectedSlots",JSON.stringify(e))}else{const e=[...c,n];r(e),localStorage.setItem("selectedSlots",JSON.stringify(e))}},d=t.p+"static/media/teach1.6bd57cbb5eaa856df04f.jpg";t.p;var m=t(8929),g=t(6213);const h=async(e,a,t,s,l,r,c,i,o,d,m)=>{try{let d=(await g.A.get(`http://13.60.221.226/api/schools/${e}`)).data[0].ESL.teacher;if(a){let e=[];if("string"===typeof t&&t.length>0)try{e=JSON.parse(t)}catch(h){console.error("Invalid JSON string for selectedTimes:",h)}Array.isArray(e)||(e=[]),d=d.filter((t=>t.data&&t.data.lang.some((t=>t.level&&t.level.some((c=>c.levelName===a&&(t.lang===s||t.lang===l)&&c.lessonTypes.some((a=>a.typeName===r&&(0===e.length||e.some((e=>a.date.some((a=>a.workTime.some((a=>new Date(new Date(a.time).getTime()+6e4*new Date(a.time).getTimezoneOffset()).getTime()===new Date(new Date((0,n.u)(e))).getTime()&&a.slots>0)))))))))))))))}console.log(d);const m=d.flatMap((e=>e.data.lang.flatMap((e=>e.lang)))),f=d.flatMap((e=>e.data.lang.filter((e=>e.lang===s)).flatMap((e=>e.level.filter((e=>e.levelName===a)).flatMap((e=>e.lessonTypes.filter((e=>e.typeName==r)).flatMap((e=>e.date))))))));s?c(m):l&&c(l),i(f),o(d)}catch(f){d(f.message)}finally{m(!1)}};t(6412);var f=t(579);const u=()=>{const[e,a]=(0,l.useState)(null),[t,g]=(0,l.useState)(!0),[u,p]=(0,l.useState)(null),[N,v]=(0,l.useState)([]),[j,y]=(0,l.useState)(),[S,x]=(0,l.useState)([]),[$,T]=(0,l.useState)(1),D=(0,s.zy)(),{level:I}=D.state||{},{language:b}=D.state||{},{lessonTypes:w}=D.state||{},{lang_from_general_cal:M}=D.state||{},{schoolId:O}=D.state||{},{count:_}=D.state||{};console.log(M,I,w,O,_);const J=localStorage.getItem("selectedDates");console.log(O);const k=()=>b?"/date":"/final";return(0,l.useEffect)((()=>{Object.keys(localStorage);localStorage.setItem("OrderId",[]),h(O,I,J,b,M,w,y,v,a,p,g)}),[]),t?(0,f.jsx)("div",{className:"loading",children:"Loading..."}):u?(0,f.jsxs)("div",{className:"error",children:["Error: ",u]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"main",children:(0,f.jsxs)("div",{className:"container",children:[(0,f.jsx)("div",{className:"logo",children:(0,f.jsx)("div",{className:"logo-items",children:(0,f.jsx)(r.N_,{to:`/${O}`,children:(0,f.jsx)("img",{src:c.A,alt:"Logo"})})})}),(0,f.jsxs)("div",{className:"container-items-block teach",children:[(0,f.jsx)("h1",{className:"teacher-title",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0432\u0447\u0438\u0442\u0435\u043b\u044f"}),e&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"teachers-data",children:e.map(((e,a)=>(0,f.jsxs)("div",{className:"teacher",children:[(0,f.jsxs)("div",{className:"teacherData",children:[(0,f.jsx)("div",{className:"teacherImg",children:(0,f.jsx)("img",{src:e.data.teacherImg||d,alt:""})}),(0,f.jsxs)("div",{className:"name-and-btn",children:[(0,f.jsx)("div",{className:"teacher-link",children:(0,f.jsx)("p",{children:e.data.teacherName})}),i(e,J,M,I,n.u,w).length<=0?(0,f.jsx)(r.N_,{to:k(),state:{teacherDate:e.data.lang.filter((e=>e.lang===b)),level:I,lang_from_general_cal:j,teacherId:e.data.teacherId,teacherName:e.data.teacherName,lessonTypes:w,schoolId:O,count:_||$},className:"select-btn",children:(0,f.jsx)("div",{children:(0,f.jsx)("p",{children:"\u041e\u0431\u0440\u0430\u0442\u0438"})})}):(0,f.jsx)("div",{className:"select-btn",children:(0,f.jsx)("div",{className:"teacher-times",children:i(e,J,M,I,n.u).length>0?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("ul",{className:"teachers-times",children:i(e,J,M,I,n.u).map(((a,t)=>(0,f.jsx)("li",{onClick:()=>o(e,j,I,w,a,x,S),style:{cursor:"pointer",backgroundColor:S.includes(`${e.data.teacherName}, ${e.data.teacherId}, ${j}, ${I}, ${w}, ${a}`)?"#4D7D6DB2":"#D9D9D980",color:S.includes(`${e.data.teacherName}, ${e.data.teacherId}, ${j}, ${I}, ${w}, ${a}`)?"white":"#205C48"},children:(0,n.r)(a)},t)))})}):null})})]})]}),(0,f.jsx)("hr",{})]},a)))}),e.some((e=>i(e,J,M,I,n.u).length>0))&&(0,f.jsx)(r.N_,{to:k(),state:{teacherDate:e[0].data.lang.filter((e=>e.lang===b)),level:I,lang_from_general_cal:j,teacherId:e[0].data.teacherId,lessonTypes:w,schoolId:O,count:_||$},className:"select-btn",children:(0,f.jsx)("button",{disabled:0===S.length,children:"\u0414\u0430\u043b\u0456"})})]})]})]})}),(0,f.jsx)(m.A,{})]})}},6412:()=>{}}]);
//# sourceMappingURL=810.05961f65.chunk.js.map