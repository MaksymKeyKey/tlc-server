"use strict";(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[818],{5501:(e,a,t)=>{t.d(a,{r:()=>l,u:()=>s});t(2573);function s(e){const a=e.replace("\u0440.","").replace("\u043e","").trim(),[t,s,l,r,c,n]=a.split(" "),i={"\u0441\u0456\u0447\u043d\u044f":"January","\u043b\u044e\u0442\u043e\u0433\u043e":"February","\u0431\u0435\u0440\u0435\u0437\u043d\u044f":"March","\u043a\u0432\u0456\u0442\u043d\u044f":"April","\u0442\u0440\u0430\u0432\u043d\u044f":"May","\u0447\u0435\u0440\u0432\u043d\u044f":"June","\u043b\u0438\u043f\u043d\u044f":"July","\u0441\u0435\u0440\u043f\u043d\u044f":"August","\u0432\u0435\u0440\u0435\u0441\u043d\u044f":"September","\u0436\u043e\u0432\u0442\u043d\u044f":"October","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430":"November","\u0433\u0440\u0443\u0434\u043d\u044f":"December"}[s];return new Date(`${i} ${t}, ${l} ${n}.000+00:00`).toUTCString()}const l=e=>{const a=new Date(e);return`${a.getUTCDate()} ${["\u0441\u0456\u0447\u043d\u044f","\u043b\u044e\u0442\u043e\u0433\u043e","\u0431\u0435\u0440\u0435\u0437\u043d\u044f","\u043a\u0432\u0456\u0442\u043d\u044f","\u0442\u0440\u0430\u0432\u043d\u044f","\u0447\u0435\u0440\u0432\u043d\u044f","\u043b\u0438\u043f\u043d\u044f","\u0441\u0435\u0440\u043f\u043d\u044f","\u0432\u0435\u0440\u0435\u0441\u043d\u044f","\u0436\u043e\u0432\u0442\u043d\u044f","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043d\u044f"][a.getUTCMonth()]} ${a.getUTCFullYear()} \u0440. \u043e ${String(a.getUTCHours()).padStart(2,"0")}:${String(a.getUTCMinutes()).padStart(2,"0")}`}},8631:(e,a,t)=>{t.r(a),t.d(a,{default:()=>T});var s=t(3216),l=t(5043),r=t(5475),c=t(8571),n=t(5501);const i=(e,a,t,s,l,r)=>{const c=localStorage.getItem(`availableTimes_${e.data.teacherId}`);if(c)try{return JSON.parse(c).map((e=>e.time))}catch(o){console.error("Invalid JSON string for availableTimes",o)}let n=[];if("string"===typeof a)try{n=JSON.parse(a),Array.isArray(n)||(console.error("parsedSelectedTimes is not an array:",n),n=[])}catch(o){console.error("Invalid JSON string for selectedTimes",o)}else Array.isArray(a)&&(n=a);const i=e.data.lang.filter((e=>e.lang===t)).flatMap((e=>e.level)).filter((e=>e.levelName===s)).flatMap((e=>e.lessonTypes.filter((e=>e.typeName==r)))).flatMap((e=>e.date)).flatMap((e=>e.workTime)).filter((e=>n.some((a=>new Date(e.time).getTime()===new Date(l(a)).getTime()&&e.slots>0))));return console.log(i),localStorage.setItem(`availableTimes_${e.data.teacherId}`,JSON.stringify(i)),i.map((e=>e.time))},o=t.p+"static/media/teach1.6bd57cbb5eaa856df04f.jpg";t.p;var d=t(8929),m=t(6213);const g=async(e,a,t,s,l,r,c,i,o,d,g)=>{try{let d=(await m.A.get(`http://13.60.221.226/api/schools/${e}`)).data[0].ESL.teacher;if(a){let e=[];if("string"===typeof t&&t.length>0)try{e=JSON.parse(t)}catch(h){console.error("Invalid JSON string for selectedTimes:",h)}Array.isArray(e)||(e=[]),d=d.filter((t=>t.data&&t.data.lang.some((t=>t.level&&t.level.some((c=>c.levelName===a&&(t.lang===s||t.lang===l)&&c.lessonTypes.some((a=>a.typeName===r&&(0===e.length||e.some((e=>a.date.some((a=>a.workTime.some((a=>new Date(a.time).getTime()===new Date((0,n.u)(e)).getTime()&&a.slots>0)))))))))))))))}console.log(d);const g=d.flatMap((e=>e.data.lang.flatMap((e=>e.lang)))),T=d.flatMap((e=>e.data.lang.filter((e=>e.lang===s)).flatMap((e=>e.level.filter((e=>e.levelName===a)).flatMap((e=>e.lessonTypes.filter((e=>e.typeName==r)).flatMap((e=>e.date))))))));s?c(g):l&&c(l),i(T),o(d)}catch(T){d(T.message)}finally{g(!1)}};t(6412);var h=t(579);const T=()=>{const[e,a]=(0,l.useState)(null),[t,m]=(0,l.useState)(!0),[T,U]=(0,l.useState)(null),[p,f]=(0,l.useState)([]),[u,N]=(0,l.useState)(),[v,j]=(0,l.useState)([]),[x,y]=(0,l.useState)(1),S=(0,s.zy)(),{level:b}=S.state||{},{language:I}=S.state||{},{lessonTypes:_}=S.state||{},{lang_from_general_cal:M}=S.state||{},{schoolId:$}=S.state||{},{count:D}=S.state||{};console.log(M,b,_,$,D);const w=localStorage.getItem("selectedDates");console.log($);const A=()=>I?"/date":"/final";return(0,l.useEffect)((()=>{Object.keys(localStorage);localStorage.setItem("OrderId",[]),g($,b,w,I,M,_,N,f,a,U,m)}),[]),t?(0,h.jsx)("div",{className:"loading",children:"Loading..."}):T?(0,h.jsxs)("div",{className:"error",children:["Error: ",T]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"main",children:(0,h.jsxs)("div",{className:"container",children:[(0,h.jsx)("div",{className:"logo",children:(0,h.jsx)("div",{className:"logo-items",children:(0,h.jsx)(r.N_,{to:`/${$}`,children:(0,h.jsx)("img",{src:c.A,alt:"Logo"})})})}),(0,h.jsxs)("div",{className:"container-items-block",children:[(0,h.jsx)("h1",{className:"teacher-title",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0432\u0447\u0438\u0442\u0435\u043b\u044f"}),e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"teachers-data",children:e.map(((e,a)=>(0,h.jsxs)("div",{className:"teacher",children:[(0,h.jsxs)("div",{className:"teacherData",children:[(0,h.jsx)("div",{className:"teacherImg",children:(0,h.jsx)("img",{src:o,alt:""})}),(0,h.jsxs)("div",{className:"name-and-btn",children:[(0,h.jsx)("div",{className:"teacher-link",children:(0,h.jsx)(r.N_,{to:"/teacherPage",state:{teacher:e},children:(0,h.jsx)("p",{children:e.data.teacherName})})}),i(e,w,M,b,n.u,_).length<=0?(0,h.jsx)(r.N_,{to:A(),state:{teacherDate:e.data.lang.filter((e=>e.lang===I)),level:b,lang_from_general_cal:u,teacherId:e.data.teacherId,teacherName:e.data.teacherName,lessonTypes:_,schoolId:$,count:D||x},className:"select-btn",children:(0,h.jsx)("div",{children:(0,h.jsx)("p",{children:"\u041e\u0431\u0440\u0430\u0442\u0438"})})}):(0,h.jsx)("div",{className:"select-btn",children:(0,h.jsx)("div",{className:"teacher-times",children:i(e,w,M,b,n.u).length>0?(0,h.jsx)(h.Fragment,{children:"TUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUTTTTTTTTTTTTTTTTTTTTTTTTTTTT"}):null})})]})]}),(0,h.jsx)("hr",{})]},a)))}),e.some((e=>i(e,w,M,b,n.u).length>0))&&(0,h.jsx)(r.N_,{to:A(),state:{teacherDate:e[0].data.lang.filter((e=>e.lang===I)),level:b,lang_from_general_cal:u,teacherId:e[0].data.teacherId,lessonTypes:_,schoolId:$,count:D||x},className:"select-btn",children:(0,h.jsx)("p",{children:"\u0414\u0430\u043b\u0456"})})]})]})]})}),(0,h.jsx)(d.A,{})]})}}}]);
//# sourceMappingURL=818.73b84073.chunk.js.map