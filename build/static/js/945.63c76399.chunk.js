"use strict";(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[945],{3945:(e,l,t)=>{t.r(l),t.d(l,{default:()=>r});var a=t(3216),s=t(5043),n=t(6213),d=t(579);const i=e=>{let{schoolId:l,fetchSchool:t,editingLang:a,setEditingLang:i}=e;const[c,o]=(0,s.useState)(""),[r,u]=(0,s.useState)(""),[h,p]=(0,s.useState)([]),[g,m]=(0,s.useState)(null),[v,x]=(0,s.useState)("");(0,s.useEffect)((()=>{a&&(o(a.lang),p(a.level))}),[a]);const j=()=>{o(""),p([]),x(""),u(""),i(null)};return(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=a?`http://13.60.221.226/api/editLanguageForSchool/${l}/${a.id}`:"http://13.60.221.226/api/addLanguageForSchool",d={id:l,lang:c,levels:h};try{await n.A.put(s,d,{headers:{"Content-Type":"application/json"}}),t(),j()}catch(i){console.error("Error saving language:",i)}},className:"language-form",children:[(0,d.jsx)("h1",{children:a?"Edit Language":"Add Language"}),(0,d.jsx)("div",{className:"input-group",children:(0,d.jsx)("input",{type:"text",value:c,onChange:e=>o(e.target.value),placeholder:"Language",className:"input-field"})}),(0,d.jsxs)("div",{className:"input-group",children:[(0,d.jsx)("input",{type:"text",value:r,onChange:e=>u(e.target.value),placeholder:"Add Level",className:"input-field"}),(0,d.jsx)("button",{type:"button",onClick:()=>{const e={id:Date.now(),levelName:r,lessonTypes:[]};p([...h,e]),u("")},className:"add-button",children:"Add Level"})]}),(0,d.jsxs)("div",{className:"levels-list",children:[(0,d.jsx)("h3",{children:"Added Levels:"}),(0,d.jsx)("ul",{children:h.map((e=>(0,d.jsxs)("li",{className:"level-item",children:[e.levelName,(0,d.jsx)("ul",{children:e.lessonTypes.map((l=>(0,d.jsxs)("li",{children:[l.typeName,(0,d.jsx)("button",{onClick:()=>{return t=e.id,a=l.id,void p(h.map((e=>e.id===t?{...e,lessonTypes:e.lessonTypes.filter((e=>e.id!==a))}:e)));var t,a},className:"delete-button",children:"Delete Class Type"})]},l.id)))}),(0,d.jsxs)("button",{type:"button",onClick:()=>m(e.id),className:"select-button "+(g===e.id?"selected":""),children:[g===e.id?"Selected":"Select"," Level for Class Types"]})]},e.id)))})]}),g&&(0,d.jsxs)("div",{className:"input-group",children:[(0,d.jsx)("input",{type:"text",value:v,onChange:e=>x(e.target.value),placeholder:"Add Class Type",className:"input-field"}),(0,d.jsx)("button",{type:"button",onClick:()=>{null!==g&&(p(h.map((e=>e.id===g?{...e,lessonTypes:[...e.lessonTypes,{id:Date.now(),typeName:v}]}:e))),x(""))},className:"add-button",children:"Add Class Type to Selected Level"})]}),(0,d.jsx)("button",{type:"submit",className:"submit-button",children:a?"Update Language":"Add Language with Levels and Class Types"}),a&&(0,d.jsx)("button",{type:"button",onClick:j,className:"cancel-button",children:"Cancel Edit"})]})},c=e=>{let{schoolId:l,fetchSchool:t,editingTeacher:a,setEditingTeacher:i,teacherId:c}=e;const[o,r]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[p,g]=(0,s.useState)([]),[m,v]=(0,s.useState)(""),[x,j]=(0,s.useState)(""),[y,N]=(0,s.useState)(""),[b,C]=(0,s.useState)("");(0,s.useEffect)((()=>{a&&(r(a.teacherName),g(a.lang))}),[a]);return(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=a?`http://13.60.221.226/api/updateTeacher/${l}`:"http://13.60.221.226/api/addTeacherForSchool";try{await n.A.put(s,{id:l,teacherName:o,langs:p,teacherId:c},{headers:{"Content-Type":"application/json"}}),t(),r(""),h(""),g([]),i(null)}catch(d){console.error(d)}},className:"add-teacher-form",children:[(0,d.jsx)("h1",{children:a?"Edit Teacher":"Add Teacher"}),(0,d.jsx)("input",{className:"input-field",type:"text",value:o,onChange:e=>r(e.target.value),placeholder:"Teacher Name"}),(0,d.jsxs)("div",{className:"lang-input-group",children:[(0,d.jsx)("input",{className:"input-field",type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Add Language"}),(0,d.jsx)("button",{type:"button",onClick:()=>{const e={id:Date.now().toString(),lang:u,level:[]};g([...p,e]),h("")},className:"add-lang-btn",children:"Add Language"})]}),(0,d.jsxs)("div",{className:"langs-list",children:[(0,d.jsx)("h3",{children:"Added Languages:"}),(0,d.jsx)("ul",{children:p.map((e=>(0,d.jsxs)("li",{className:"lang-item",children:[(0,d.jsx)("input",{type:"text",value:e.lang,onChange:l=>{return t=e.id,a=l.target.value,void g(p.map((e=>e.id===t?{...e,lang:a}:e)));var t,a},placeholder:"Edit Language"}),(0,d.jsx)("button",{className:"delete-btn",onClick:()=>{return l=e.id,void g(p.filter((e=>e.id!==l)));var l},children:"Delete"}),(0,d.jsx)("ul",{children:e.level.length>0?e.level.map((l=>(0,d.jsxs)("li",{className:"level-item",children:[(0,d.jsx)("input",{type:"text",value:l.levelName,onChange:t=>{return a=e.id,s=l.id,n=t.target.value,void g(p.map((e=>e.id===a?{...e,level:e.level.map((e=>e.id===s?{...e,levelName:n}:e))}:e)));var a,s,n},placeholder:"Edit Level"}),(0,d.jsx)("button",{className:"delete-btn",onClick:()=>{return t=e.id,a=l.id,void g(p.map((e=>e.id===t?{...e,level:e.level.filter((e=>e.id!==a))}:e)));var t,a},children:"Delete"}),(0,d.jsx)("ul",{children:l.lessonTypes.length>0?l.lessonTypes.map((t=>(0,d.jsxs)("li",{className:"class-type-item",children:[(0,d.jsx)("input",{type:"text",value:t.typeName,onChange:e=>{const a=l.lessonTypes.map((l=>l.id===t.id?{...l,lessonTypes:e.target.value}:l));g(p.map((e=>e.id===x?{...e,level:e.level.map((e=>e.id===b?{...e,lessonTypes:a}:e))}:e)))},placeholder:"Edit Class Type"}),(0,d.jsx)("button",{className:"delete-btn",onClick:()=>{return a=e.id,s=l.id,n=t.id,void g(p.map((e=>e.id===a?{...e,level:e.level.map((e=>e.id===s?{...e,lessonTypes:e.lessonTypes.filter((e=>e.id!==n))}:e))}:e)));var a,s,n},children:"Delete Class Type"})]},t.id))):(0,d.jsx)("li",{children:"No class types added yet"})})]},l.id))):(0,d.jsx)("li",{children:"No levels added yet"})})]},e.id)))})]}),(0,d.jsxs)("div",{className:"add-level-group",children:[(0,d.jsxs)("select",{value:x,onChange:e=>j(e.target.value),className:"select-field",children:[(0,d.jsx)("option",{value:"",children:"Select a language"}),p.map((e=>(0,d.jsx)("option",{value:e.id,children:e.lang},e.id)))]}),(0,d.jsx)("input",{className:"input-field",type:"text",value:m,onChange:e=>v(e.target.value),placeholder:"Add Level"}),(0,d.jsx)("button",{type:"button",onClick:()=>{if(!x)return void alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u044f\u0437\u044b\u043a \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0443\u0440\u043e\u0432\u043d\u044f");const e={id:Date.now().toString(),levelName:m,lessonTypes:[],date:[]};g(p.map((l=>l.id===x?{...l,level:[...l.level,e]}:l))),v("")},className:"add-level-btn",children:"Add Level"})]}),(0,d.jsxs)("div",{className:"add-class-type-group",children:[(0,d.jsxs)("select",{value:b,onChange:e=>C(e.target.value),className:"select-field",children:[(0,d.jsx)("option",{value:"",children:"Select a level"}),p.filter((e=>e.id===x)).flatMap((e=>e.level)).map((e=>(0,d.jsx)("option",{value:e.id,children:e.levelName},e.id)))]}),(0,d.jsx)("input",{className:"input-field",type:"text",value:y,onChange:e=>N(e.target.value),placeholder:"Add Class Type"}),(0,d.jsx)("button",{type:"button",onClick:()=>{if(!b)return void alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u0430 \u0437\u0430\u043d\u044f\u0442\u0438\u0439");const e={id:Date.now().toString(),typeName:y};g(p.map((l=>l.id===x?{...l,level:l.level.map((l=>l.id===b?{...l,lessonTypes:[...l.lessonTypes,e]}:l))}:l))),N("")},className:"add-class-type-btn",children:"Add Class Type"})]}),(0,d.jsx)("button",{type:"submit",className:"submit-btn",children:a?"Update Teacher":"Add Teacher"})]})},o=()=>{const[e,l]=(0,s.useState)(null),[t,o]=(0,s.useState)(null),[r,u]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),g=(0,a.zy)(),{schoolId:m}=g.state||{};console.log(m);const v=async()=>{const e=await n.A.get(`http://13.60.221.226/api/schools/${m}`);l(e.data[0]),console.log(e.data)};(0,s.useEffect)((()=>{v()}),[m]);return e?(0,d.jsxs)("div",{className:"school-detail",children:[(0,d.jsx)("h2",{className:"school-name",children:e.ESL.schoolName}),(0,d.jsx)("h3",{children:"Languages:"}),(0,d.jsx)("ul",{className:"language-list",children:e.ESL.language.map((e=>(0,d.jsxs)("li",{className:"language-item",children:[e.lang,(0,d.jsx)("button",{onClick:()=>(async e=>{try{await n.A.delete(`http://13.60.221.226/api/deleteLanguageFromSchool/${m}/${e}`),v()}catch(l){console.error("Error deleting language:",l)}})(e.id),className:"delete-button",children:"Delete"}),(0,d.jsx)("button",{onClick:()=>o(e),className:"edit-button",children:"Edit"}),(0,d.jsx)("ul",{children:e.level.map((l=>(0,d.jsxs)("li",{className:"level-item",children:[l.levelName,(0,d.jsx)("button",{onClick:()=>(async(e,l)=>{try{await n.A.delete(`http://13.60.221.226/api/deleteLevelFromLanguage/${m}/${e}/${l}`),v()}catch(t){console.error("Error deleting level:",t)}})(e.id,l.id),className:"delete-button",children:"Delete Level"}),(0,d.jsx)("ul",{children:l.lessonTypes.map((t=>(0,d.jsxs)("li",{className:"class-type-item",children:[t.typeName,console.log(t.id),(0,d.jsx)("button",{onClick:()=>(async(e,l,t)=>{try{console.log(e,l,t),await n.A.delete(`http://13.60.221.226/api/deleteClassTypeFromLevel/${m}`,{data:{languageId:e,levelId:l,classTypeId:t}}),v()}catch(a){console.error("Error deleting class type:",a)}})(e.id,l.id,t.id),className:"delete-button",children:"Delete Class Type"})]},t.id)))})]},l.id)))})]},e.id)))}),(0,d.jsx)("h3",{children:"Teachers:"}),(0,d.jsx)("ul",{className:"teacher-list",children:e.ESL.teacher.map((e=>(0,d.jsxs)("li",{className:"teacher-item",children:[e.data.teacherName,(0,d.jsx)("button",{onClick:()=>(async e=>{try{await n.A.delete(`http://13.60.221.226/api/deleteTeacherFromSchool/${m}/${e}`),v()}catch(l){console.error("Error deleting teacher:",l)}})(e.data.teacherId),className:"delete-button",children:"Delete"}),(0,d.jsx)("button",{onClick:()=>((e,l)=>{u(e),p(l)})(e.data,e.data.teacherId),className:"edit-button",children:"Edit"})]},e.data.teacherId)))}),(0,d.jsx)(i,{schoolId:m,fetchSchool:v,editingLang:t,setEditingLang:o}),(0,d.jsx)(c,{schoolId:m,fetchSchool:v,editingTeacher:r,setEditingTeacher:u,teacherId:h})]}):(0,d.jsx)("p",{children:"Loading..."})},r=()=>{const{id:e}=(0,a.g)();return(0,d.jsx)(o,{schoolId:e})}}}]);
//# sourceMappingURL=945.63c76399.chunk.js.map