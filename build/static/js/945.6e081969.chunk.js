"use strict";(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[945],{3945:(e,l,a)=>{a.r(l),a.d(l,{default:()=>r});var t=a(3216),s=a(5043),n=a(6213),d=a(579);const i=e=>{let{schoolId:l,fetchSchool:a,editingLang:t,setEditingLang:i}=e;const[c,o]=(0,s.useState)(""),[r,u]=(0,s.useState)(""),[h,p]=(0,s.useState)([]),[g,m]=(0,s.useState)(null),[v,x]=(0,s.useState)(null),[j,y]=(0,s.useState)("");(0,s.useEffect)((()=>{t&&(o(t.lang),p(t.level))}),[t]);const N=()=>{o(""),p([]),y(""),u(""),i(null)};return(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=t?`http://13.60.221.226/api/editLanguageForSchool/${l}/${t.id}`:"http://13.60.221.226/api/addLanguageForSchool",d={id:l,lang:c,levels:h};try{await n.A.put(s,d,{headers:{"Content-Type":"application/json"}}),a(),N()}catch(i){console.error("Error saving language:",i)}},className:"language-form",children:[(0,d.jsx)("h1",{children:t?"Edit Language":"Add Language"}),(0,d.jsx)("div",{className:"input-group",children:(0,d.jsx)("input",{type:"text",value:c,onChange:e=>o(e.target.value),placeholder:"Language",className:"input-field"})}),(0,d.jsxs)("div",{className:"input-group",children:[(0,d.jsx)("input",{type:"text",value:r,onChange:e=>u(e.target.value),placeholder:"Add Level",className:"input-field"}),(0,d.jsx)("button",{type:"button",onClick:()=>{const e={id:Date.now(),levelName:r,lessonTypes:[]};p([...h,e]),u("")},className:"add-button",children:"Add Level"})]}),(0,d.jsxs)("div",{className:"levels-list",children:[(0,d.jsx)("h3",{children:"Added Levels:"}),(0,d.jsx)("ul",{children:h.map((e=>(0,d.jsxs)("li",{className:"level-item",children:[e.levelName,(0,d.jsx)("ul",{children:e.lessonTypes.map((l=>(0,d.jsxs)("li",{children:[l.typeName," - ",l.price,(0,d.jsx)("button",{onClick:()=>{return a=e.id,t=l.id,void p(h.map((e=>e.id===a?{...e,lessonTypes:e.lessonTypes.filter((e=>e.id!==t))}:e)));var a,t},className:"delete-button",children:"\u2716"})]},l.id)))}),(0,d.jsxs)("button",{type:"button",onClick:()=>x(e.id),className:"select-button "+(v===e.id?"selected":""),children:[v===e.id?"Selected":"Select"," Level for Class Types"]})]},e.id)))})]}),v&&(0,d.jsxs)("div",{className:"input-group",children:[(0,d.jsx)("input",{type:"text",value:j,onChange:e=>y(e.target.value),placeholder:"Add Class Type",className:"input-field"}),(0,d.jsx)("input",{type:"number",value:g,onChange:e=>m(e.target.value),placeholder:"Enter Price",className:"input-field"}),(0,d.jsx)("button",{type:"button",onClick:()=>{null!==v&&null!==g&&(p(h.map((e=>e.id===v?{...e,lessonTypes:[...e.lessonTypes,{id:Date.now(),typeName:j,price:g}]}:e))),y(""),m(""))},className:"add-button",children:"Add Class Type to Selected Level"})]}),(0,d.jsx)("button",{type:"submit",className:"submit-button",children:t?"Update Language":"Add Language with Levels and Class Types"}),t&&(0,d.jsx)("button",{type:"button",onClick:N,className:"cancel-button",children:"Cancel Edit"})]})},c=e=>{let{schoolId:l,fetchSchool:a,editingTeacher:t,setEditingTeacher:i,teacherId:c}=e;const[o,r]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[p,g]=(0,s.useState)(""),[m,v]=(0,s.useState)([]),[x,j]=(0,s.useState)(""),[y,N]=(0,s.useState)(""),[b,C]=(0,s.useState)(""),[T,S]=(0,s.useState)("");(0,s.useEffect)((()=>{t&&(r(t.teacherName),r(t.teacherImg),v(t.lang))}),[t]);return(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=t?`http://13.60.221.226/api/updateTeacher/${l}`:"http://13.60.221.226/api/addTeacherForSchool";try{await n.A.put(s,{id:l,teacherName:o,teacherImg:u,langs:m,teacherId:c},{headers:{"Content-Type":"application/json"}}),a(),r(""),h(""),g(""),v([]),i(null)}catch(d){console.error(d)}},className:"add-teacher-form",children:[(0,d.jsx)("h1",{children:t?"Edit Teacher":"Add Teacher"}),(0,d.jsx)("input",{className:"input-field",type:"text",value:o,onChange:e=>r(e.target.value),placeholder:"Teacher Name"}),(0,d.jsx)("input",{className:"input-field",type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Teacher Image"}),(0,d.jsxs)("div",{className:"lang-input-group",children:[(0,d.jsx)("input",{className:"input-field",type:"text",value:p,onChange:e=>g(e.target.value),placeholder:"Add Language"}),(0,d.jsx)("button",{type:"button",onClick:()=>{const e={id:Date.now().toString(),lang:p,level:[]};v([...m,e]),g("")},className:"add-lang-btn",children:"Add Language"})]}),(0,d.jsxs)("div",{className:"langs-list",children:[(0,d.jsx)("h3",{children:"Added Languages:"}),(0,d.jsx)("ul",{children:m.map((e=>(0,d.jsxs)("li",{className:"lang-item",children:[(0,d.jsx)("input",{type:"text",value:e.lang,onChange:l=>{return a=e.id,t=l.target.value,void v(m.map((e=>e.id===a?{...e,lang:t}:e)));var a,t},placeholder:"Edit Language"}),(0,d.jsx)("button",{className:"delete-btn",onClick:()=>{return l=e.id,void v(m.filter((e=>e.id!==l)));var l},children:"\u2716"}),(0,d.jsx)("ul",{children:e.level.length>0?e.level.map((l=>(0,d.jsxs)("li",{className:"level-item",children:[(0,d.jsx)("input",{type:"text",value:l.levelName,onChange:a=>{return t=e.id,s=l.id,n=a.target.value,void v(m.map((e=>e.id===t?{...e,level:e.level.map((e=>e.id===s?{...e,levelName:n}:e))}:e)));var t,s,n},placeholder:"Edit Level"}),(0,d.jsx)("button",{className:"delete-btn",onClick:()=>{return a=e.id,t=l.id,void v(m.map((e=>e.id===a?{...e,level:e.level.filter((e=>e.id!==t))}:e)));var a,t},children:"\u2716"}),(0,d.jsx)("ul",{children:l.lessonTypes.length>0?l.lessonTypes.map((a=>(0,d.jsxs)("li",{className:"class-type-item",children:[(0,d.jsx)("input",{type:"text",value:a.typeName,onChange:e=>{const t=l.lessonTypes.map((l=>l.id===a.id?{...l,lessonTypes:e.target.value}:l));v(m.map((e=>e.id===y?{...e,level:e.level.map((e=>e.id===T?{...e,lessonTypes:t}:e))}:e)))},placeholder:"Edit Class Type"}),(0,d.jsx)("button",{className:"delete-btn",onClick:()=>{return t=e.id,s=l.id,n=a.id,void v(m.map((e=>e.id===t?{...e,level:e.level.map((e=>e.id===s?{...e,lessonTypes:e.lessonTypes.filter((e=>e.id!==n))}:e))}:e)));var t,s,n},children:"\u2716"})]},a.id))):(0,d.jsx)("li",{children:"No class types added yet"})})]},l.id))):(0,d.jsx)("li",{children:"No levels added yet"})})]},e.id)))})]}),(0,d.jsxs)("div",{className:"add-level-group",children:[(0,d.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"select-field",children:[(0,d.jsx)("option",{value:"",children:"Select a language"}),m.map((e=>(0,d.jsx)("option",{value:e.id,children:e.lang},e.id)))]}),(0,d.jsx)("input",{className:"input-field",type:"text",value:x,onChange:e=>j(e.target.value),placeholder:"Add Level"}),(0,d.jsx)("button",{type:"button",onClick:()=>{if(!y)return void alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u044f\u0437\u044b\u043a \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0443\u0440\u043e\u0432\u043d\u044f");const e={id:Date.now().toString(),levelName:x,lessonTypes:[],date:[]};v(m.map((l=>l.id===y?{...l,level:[...l.level,e]}:l))),j("")},className:"add-level-btn",children:"Add Level"})]}),(0,d.jsxs)("div",{className:"add-class-type-group",children:[(0,d.jsxs)("select",{value:T,onChange:e=>S(e.target.value),className:"select-field",children:[(0,d.jsx)("option",{value:"",children:"Select a level"}),m.filter((e=>e.id===y)).flatMap((e=>e.level)).map((e=>(0,d.jsx)("option",{value:e.id,children:e.levelName},e.id)))]}),(0,d.jsx)("input",{className:"input-field",type:"text",value:b,onChange:e=>C(e.target.value),placeholder:"Add Class Type"}),(0,d.jsx)("button",{type:"button",onClick:()=>{if(!T)return void alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u0430 \u0437\u0430\u043d\u044f\u0442\u0438\u0439");const e={id:Date.now().toString(),typeName:b};v(m.map((l=>l.id===y?{...l,level:l.level.map((l=>l.id===T?{...l,lessonTypes:[...l.lessonTypes,e]}:l))}:l))),C("")},className:"add-class-type-btn",children:"Add Class Type"})]}),(0,d.jsx)("button",{type:"submit",className:"submit-btn",children:t?"Update Teacher":"Add Teacher"})]})},o=()=>{const[e,l]=(0,s.useState)(null),[a,o]=(0,s.useState)(null),[r,u]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),g=(0,t.zy)(),{schoolId:m}=g.state||{};console.log(m);const v=async()=>{const e=await n.A.get(`http://13.60.221.226/api/schools/${m}`);l(e.data[0]),console.log(e.data)};(0,s.useEffect)((()=>{v()}),[m]);return e?(0,d.jsxs)("div",{className:"school-detail",children:[(0,d.jsx)("h2",{className:"school-name",children:e.ESL.schoolName}),(0,d.jsx)("h3",{children:"Languages:"}),(0,d.jsx)("ul",{className:"language-list",children:e.ESL.language.map((e=>(0,d.jsxs)("li",{className:"language-item",children:[e.lang,(0,d.jsx)("button",{onClick:()=>(async e=>{try{await n.A.delete(`http://13.60.221.226/api/deleteLanguageFromSchool/${m}/${e}`),v()}catch(l){console.error("Error deleting language:",l)}})(e.id),className:"delete-button",children:"\u2716"}),(0,d.jsx)("button",{onClick:()=>o(e),className:"edit-button",children:"Edit"}),(0,d.jsx)("ul",{children:e.level.map((l=>(0,d.jsxs)("li",{className:"level-item",children:[l.levelName,(0,d.jsx)("button",{onClick:()=>(async(e,l)=>{try{await n.A.delete(`http://13.60.221.226/api/deleteLevelFromLanguage/${m}/${e}/${l}`),v()}catch(a){console.error("Error deleting level:",a)}})(e.id,l.id),className:"delete-button",children:"\u2716"}),(0,d.jsx)("ul",{children:l.lessonTypes.map((a=>(0,d.jsxs)("li",{className:"class-type-item",children:[a.typeName,console.log(a.id),(0,d.jsx)("button",{onClick:()=>(async(e,l,a)=>{try{console.log(e,l,a),await n.A.delete(`http://13.60.221.226/api/deleteClassTypeFromLevel/${m}`,{data:{languageId:e,levelId:l,classTypeId:a}}),v()}catch(t){console.error("Error deleting class type:",t)}})(e.id,l.id,a.id),className:"delete-button",children:"\u2716"})]},a.id)))})]},l.id)))})]},e.id)))}),(0,d.jsx)("h3",{children:"Teachers:"}),(0,d.jsx)("ul",{className:"teacher-list",children:e.ESL.teacher.map((e=>(0,d.jsxs)("li",{className:"teacher-item",children:[e.data.teacherName,(0,d.jsx)("button",{onClick:()=>(async e=>{try{await n.A.delete(`http://13.60.221.226/api/deleteTeacherFromSchool/${m}/${e}`),v()}catch(l){console.error("Error deleting teacher:",l)}})(e.data.teacherId),className:"delete-button",children:"\u2716"}),(0,d.jsx)("button",{onClick:()=>((e,l)=>{u(e),p(l)})(e.data,e.data.teacherId),className:"edit-button",children:"Edit"})]},e.data.teacherId)))}),(0,d.jsx)(i,{schoolId:m,fetchSchool:v,editingLang:a,setEditingLang:o}),(0,d.jsx)(c,{schoolId:m,fetchSchool:v,editingTeacher:r,setEditingTeacher:u,teacherId:h})]}):(0,d.jsx)("p",{children:"Loading..."})},r=()=>{const{id:e}=(0,t.g)();return(0,d.jsx)(o,{schoolId:e})}}}]);
//# sourceMappingURL=945.6e081969.chunk.js.map